<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<title>安全设置 | ElasticSearch 7.7 权威指南中文版</title>
	<meta name="keywords" content="ElasticSearch 权威指南中文版, elasticsearch 7, es7, 实时数据分析，实时数据检索" />
    <meta name="description" content="ElasticSearch 权威指南中文版, elasticsearch 7, es7, 实时数据分析，实时数据检索" />
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
	<link rel="stylesheet" type="text/css" href="../static/styles.css" />
	<script>
	var _link = 'security-settings.html';
    </script>
</head>
<body>
<div class="main-container">
    <section id="content">
        <div class="content-wrapper">
            <section id="guide" lang="zh_cn">
                <div class="container">
                    <div class="row">
                        <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                            <div style="color:gray; word-break: break-all; font-size:12px;">原英文版地址: <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.7/security-settings.html" rel="nofollow" target="_blank">https://www.elastic.co/guide/en/elasticsearch/reference/7.7/security-settings.html</a>, 原文档版权归 www.elastic.co 所有<br/>本地英文版地址: <a href="../en/security-settings.html" rel="nofollow" target="_blank">../en/security-settings.html</a></div>
                        <!-- start body -->
                  <div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch 权威指南 [7.7]</a></span>
»
<span class="breadcrumb-link"><a href="setup.html">安装和设置</a></span>
»
<span class="breadcrumb-link"><a href="settings.html">配置 Elasticsearch</a></span>
»
<span class="breadcrumb-node">安全设置</span>
</div>
<div class="navheader">
<span class="prev">
<a href="search-settings.html">« 搜索设置</a>
</span>
<span class="next">
<a href2="shard-request-cache.html">Shard request cache settings »</a>
</span>
</div>
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title">
<a id="security-settings"></a>安全设置
</h2>
</div></div></div>

<p>
默认情况下，当你使用(basic)基本 或 (trail)试用许可时，Elasticsearch 安全功能是禁用的。
要启用安全功能，请使用 <code class="literal">xpack.security.enabled</code> 设置。
</p>
<p>
配置 <code class="literal">xpack.security</code> 设置以 <a class="xref" href="security-settings.html#anonymous-access-settings" title="Anonymous access settings">启用匿名访问</a> 并执行消息身份验证，
<a class="xref" href="security-settings.html#field-document-security-settings" title="Document and field level security settings">设置文档和字段级别的安全</a>，
<a class="xref" href="security-settings.html#realm-settings" title="Realm settings">配置领域(realms)</a>，
<a class="xref" href="security-settings.html#ssl-tls-settings" title="General TLS settings">用 SSL 加密通信</a>，
以及 <a class="xref" href="auditing-settings.html" title="Auditing security settings">审计安全事件</a>。
</p>
<p>
有这些设置都可以添加到<code class="literal">elasticsearch.yml</code>配置文件中，只有安全设置除外，它是添加到 Elasticsearch 密钥库中的。
有关创建和更新 Elasticsearch 密钥库的更多信息，请参考 <a class="xref" href="secure-settings.html" title="Secure settings">安全设置</a>。
</p>
<h4>
<a id="general-security-settings"></a>常规安全设置
</h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.enabled</code>
</span>
</dt>
<dd>
<p>
设置为 <code class="literal">true</code> 以在节点上启用 Elasticsearch 安全功能。
</p>
<p>
如果设置为 <code class="literal">false</code>（basic 许可证和 trail 许可证的默认值），则安全功能将被禁用。
它还影响连接到这个 Elasticsearch 实例的所有 Kibana 实例，不需要在那些 Kibana 实例的 <code class="literal">kibana.yml</code> 文件中禁用安全特性。
有关在特定 Kibana 实例中禁用安全功能的更多信息，请参考 <a href="https://www.elastic.co/guide/en/kibana/7.7/security-settings-kb.html" class="ulink" target="_top">Kibana安全设置</a>。
</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>
如果你使用 gold 或更高版本的许可证，默认就是 <code class="literal">true</code>；但是仍建议你显式地添加此设置，以免混淆。
</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.hide_settings</code>
</span>
</dt>
<dd>
群集节点信息API结果中忽略的设置的逗号分隔列表。
一个用逗号分隔的设置列表，这些设置在 <a class="xref" href="cluster-nodes-info.html" title="Nodes info API">集群节点信息API</a> 的结果中被省略了。
可以使用通配符在列表中包含多个设置。
例如，<code class="literal">xpack.security.authc.realms.active_directory.ad1.*</code> 这个值会隐藏 ad1 活动目录领域(active_directory realm)的所有设置。
出于信息的敏感性，API 已经忽略了所有<code class="literal">ssl</code>设置、<code class="literal">bind_dn</code>和 <code class="literal">bind_password</code>。
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.fips_mode.enabled</code>
</span>
</dt>
<dd>
启用 <code class="literal">fips</code> 操作模式。
如果你在启用 FIPS 140-2 的 JVM 中运行这个 Elasticsearch 实例，请设置为 <code class="literal">true</code>。
更多信息参考 <a class="xref" href="fips-140-compliance.html" title="FIPS 140-2">FIPS 140-2</a>。
默认为 <code class="literal">false</code>。
</dd>
</dl>
</div>
<h4>
<a id="password-hashing-settings"></a>密码哈希设置
</h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.authc.password_hashing.algorithm</code>
</span>
</dt>
<dd>
指定用于安全用户凭据存储的哈希算法。  
参考 <a class="xref" href="security-settings.html#password-hashing-algorithms" title="Password hashing algorithms">表 2，“密码哈希算法”</a>。默认为<code class="literal">bcrypt</code>。
</dd>
</dl>
</div>
<h4>
<a id="anonymous-access-settings"></a>匿名访问设置
</h4>
<p>
你可以在 <code class="literal">elasticsearch.yml</code> 中配置下面几个匿名访问设置。
更多信息参考 <a class="xref" href="anonymous-access.html" title="Enabling anonymous access">启用匿名访问</a>。
</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.authc.anonymous.username</code>
</span>
</dt>
<dd>
匿名用户的用户名(最重要的)。默认为 <code class="literal">_es_anonymous_user</code> 。
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.authc.anonymous.roles</code>
</span>
</dt>
<dd>
与匿名用户关联的角色。必填。
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.authc.anonymous.authz_exception</code>
</span>
</dt>
<dd>
为<code class="literal">true</code>时，如果匿名用户没有请求操作的适当权限，则返回 HTTP 403 响应。
也不会提示用户提供凭据来访问所请求的资源。
当设置为 <code class="literal">false</code> 时, 会返回一个 HTTP 401 响应，用户可以提供具有适当权限的凭据来获得访问权限。
默认为 <code class="literal">true</code>。
</dd>
</dl>
</div>
<h4>
<a id="security-automata-settings"></a>自动机(Automata) 设置
</h4>
<p>
在安全特征接受通配符模式的地方(例如，角色中的索引模式、角色映射API中的组匹配)，每个模式都被编译成自动机。
以下设置可用于控制这种行为。
</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.automata.max_determinized_states</code>
</span>
</dt>
<dd>
单个模式可以创建的自动机状态的上限。
这防止了过于困难(例如指数级困难)的模式。
默认为 <code class="literal">100,000</code> 。
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.automata.cache.enabled</code>
</span>
</dt>
<dd>
是否缓存编译后的自动机。
编译自动机会占用大量 CPU 资源，可能会降低某些操作的速度。
缓存降低了自动机需要编译的频率。
默认为 <code class="literal">true</code> 。
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.automata.cache.size</code>
</span>
</dt>
<dd>
自动机缓存中要保留的最大项目数。默认为 <code class="literal">10,000</code> 。
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.automata.cache.ttl</code>
</span>
</dt>
<dd>
项目在自动机缓存中保留的时间(基于最近的使用)。
默认为 <code class="literal">48h</code> (48 小时)。
</dd>
</dl>
</div>
<h4>
<a id="field-document-security-settings"></a>文档和字段级别的安全设置
</h4>
<p>
可以在 <code class="literal">elasticsearch.yml</code> 中配置下面几个文档和字段级别的安全设置。
更多信息参考 <a class="xref" href="field-and-document-access-control.html" title="Setting up field and document level security">设置字段和文档级别的安全</a>。
</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.dls_fls.enabled</code>
</span>
</dt>
<dd>
设置为<code class="literal">false</code> 可防止配置文档和字段级别的安全性。
默认为 <code class="literal">true</code> 。
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.dls.bitset.cache.ttl</code>
</span>
</dt>
<dd>
用于文档级安全的 <code class="literal">位组 (BitSet)</code> 的缓存的生存时间(ttl, time-to-live)。
文档级安全查询可能依赖于 Lucene BitSet 对象，这些对象会被自动缓存以提高性能。
默认会将 <code class="literal">168h</code> (7天)未使用的条目过期。
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.dls.bitset.cache.size</code>
</span>
</dt>
<dd>
用于文档级安全的 <code class="literal">位组 (BitSet)</code> 的缓存可使用的最大内存。
文档级安全查询可能依赖于 Lucene BitSet 对象，这些对象会被自动缓存以提高性能。
默认为 <code class="literal">50mb</code>，超过此内存，最近最少使用的条目将被清除。
</dd>
</dl>
</div>
<h4>
<a id="token-service-settings"></a>令牌(token)服务设置
</h4>
<p>可以在 <code class="literal">elasticsearch.yml</code> 中设置以下令牌服务设置。</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.authc.token.enabled</code>
</span>
</dt>
<dd>
设置为 <code class="literal">false</code> 以禁用内置的令牌服务。
默认值是 <code class="literal">true</code>，除非 <code class="literal">xpack.security.http.ssl.enabled</code>设置为 <code class="literal">false</code>。
这可以防止通过普通 http 从连接中嗅探令牌。
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.authc.token.timeout</code>
</span>
</dt>
<dd>
令牌的有效时间。
默认情况下，这个值是 <code class="literal">20m</code>，就是 20分钟。
最大值是 1 小时。
</dd>
</dl>
</div>
<h4>
<a id="api-key-service-settings"></a>API 密钥服务管理
</h4>
<p>可以在 <code class="literal">elasticsearch.yml</code> 中设置以下 API 密钥服务设置。</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.authc.api_key.enabled</code>
</span>
</dt>
<dd>
设置为 <code class="literal">false</code> 以禁用内置的 API 密钥服务。
默认值是 <code class="literal">true</code>，除非 <code class="literal">xpack.security.http.ssl.enabled</code>设置为 <code class="literal">false</code>。
这可以防止通过普通 http 从连接中嗅探API 密钥。
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.authc.api_key.hashing.algorithm</code>
</span>
</dt>
<dd>
指定用于保护 API 密钥凭据的哈希算法。
参考 <a class="xref" href="security-settings.html#password-hashing-algorithms" title="Password hashing algorithms">表 2, “密码哈希算法”</a>。
默认值为 <code class="literal">pbkdf2</code>。
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.authc.api_key.cache.ttl</code>
</span>
</dt>
<dd>
缓存的 API 密钥的生存时间。
在这段时间内，API 密钥的 id 及密钥的哈希值被缓存。
用 Elasticsearch 标准的<a class="xref" href="common-options.html#time-units" title="Time units">time units (时间单位)</a>指定时间段。
默认为 <code class="literal">1d</code> 即 1 天。
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.authc.api_key.cache.max_keys</code>
</span>
</dt>
<dd>
在任何给定时间内，可以存在于缓存中的 API 密钥的最大数量。默认为 10,000。
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.authc.api_key.cache.hash_algo</code>
</span>
</dt>
<dd>
(专家级设置) 用于缓存在内存中的 API 密钥凭据的哈希算法。
有关可能的值，参考 <a class="xref" href="security-settings.html#cache-hash-algo" title="Cache hash algorithms">表 1, “缓存哈希算法”</a>.
默认值为 <code class="literal">ssha256</code>。
</dd>
</dl>
</div>
<h4>
<a id="realm-settings"></a>realm 设置
</h4>
<p>
可以在 <code class="literal">elasticsearch.yml</code> 的 <code class="literal">xpack.security.authc.realms</code> 命名空间下配置 realm 设置。
比如：
</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.security.authc.realms:

    native.realm1: <a id="CO24-1"></a><i class="conum" data-value="1"></i>
        order: 0
        ...

    ldap.realm2:
        order: 1
        ...

    active_directory.realm3:
        order: 2
        ...
    ...</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO24-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>
指定 realm 的类型（比如，<code class="literal">native</code>, <code class="literal">ldap</code>, <code class="literal">active_directory</code>, <code class="literal">pki</code>, <code class="literal">file</code>, <code class="literal">kerberos</code>, <code class="literal">saml</code>）及 realm 的名称。
此设置是必须的。
</p>
</td>
</tr>
</table>
</div>
<p>
有效设置因 realm 类型而异。
更多信息请参考 <a class="xref" href="setting-up-authentication.html" title="User authentication"><em>用户身份验证</em></a>。
</p>
<h5>
<a id="ref-realm-settings"></a>对所有 realm 有效的设置
</h5>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">order</code>
</span>
</dt>
<dd>
realm 链中 realm 的优先级。值越小，越先被咨询。
虽然不是必需的，但强烈建议在配置多个 realm 时使用此设置。
默认值为 <code class="literal">Integer.MAX_VALUE</code>。
</dd>
<dt>
<span class="term">
<code class="literal">enabled</code>
</span>
</dt>
<dd>
是否启用 realm 。
可以使用此设置禁用 realm，而无需删除其配置信息。默认为 <code class="literal">true</code>。
</dd>
</dl>
</div>
<h5>
<a id="ref-native-settings"></a>本地realm设置 (native realm settings)
</h5>
<p>
对于本地 realm 来说，<code class="literal">type</code> 必须设置为 <code class="literal">native</code>。
除了<a class="xref" href="security-settings.html#ref-realm-settings" title="Settings valid for all realms">对所有realm都有效的设置</a>之外，你还可以指定以下可选设置:
</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cache.ttl</code>
</span>
</dt>
<dd>
缓存的用户的生存时间。
在这段时间内，用户及其凭证的哈希值将被缓存。
用 Elasticsearch 标准的<a class="xref" href="common-options.html#time-units" title="Time units">time units (时间单位)</a>指定时间段。
默认为 <code class="literal">20m</code> 即 20 分钟。
</dd>
<dt>
<span class="term">
<code class="literal">cache.max_users</code>
</span>
</dt>
<dd>
在任何给定时间内，可以存在于缓存中的最大用户数量。默认为 100,000。
</dd>
<dt>
<span class="term">
<code class="literal">cache.hash_algo</code>
</span>
</dt>
<dd>
(专家级设置) 用于缓存在内存中的用户凭据的哈希算法。
有关可能的值，参考 <a class="xref" href="security-settings.html#cache-hash-algo" title="Cache hash algorithms">表 1, “缓存哈希算法”</a>.
默认值为 <code class="literal">ssha256</code>。
</dd>
<dt>
<span class="term">
<code class="literal">authentication.enabled</code>
</span>
</dt>
<dd>
如果设置为 <code class="literal">false</code>，则在该 realm 中禁用对身份验证的支持，这就仅支持用户查找了。
(参考 <a class="xref" href="run-as-privilege.html" title="Submitting requests on behalf of other users">运行方式 (run as)</a> 和 <a class="xref" href="realm-chains.html#authorization_realms" title="Delegating authorization to another realm">授权 realms</a> 功能)。
默认为 <code class="literal">true</code>。
</dd>
</dl>
</div>
<h5>
<a id="ref-users-settings"></a>文件 realm 设置
</h5>
<p>
<code class="literal">type</code> 设置必须设置为 <code class="literal">file</code>。
除了<a class="xref" href="security-settings.html#ref-realm-settings" title="Settings valid for all realms">对所有realm都有效的设置</a>之外，你还可以指定以下可选设置:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cache.ttl</code>
</span>
</dt>
<dd>
缓存的用户的生存时间。
在这段时间内，用户及其凭证的哈希值将被缓存。
用 Elasticsearch 标准的<a class="xref" href="common-options.html#time-units" title="Time units">time units (时间单位)</a>指定时间段。
默认为 <code class="literal">20m</code> 即 20 分钟。
</dd>
<dt>
<span class="term">
<code class="literal">cache.max_users</code>
</span>
</dt>
<dd>
在任何给定时间内，可以存在于缓存中的最大用户数量。默认为 100,000。
</dd>
<dt>
<span class="term">
<code class="literal">cache.hash_algo</code>
</span>
</dt>
<dd>
(专家级设置) 用于缓存在内存中的用户凭据的哈希算法。
有关可能的值，参考 <a class="xref" href="security-settings.html#cache-hash-algo" title="Cache hash algorithms">表 1, “缓存哈希算法”</a>.
默认值为 <code class="literal">ssha256</code>。
</dd>
<dt>
<span class="term">
<code class="literal">authentication.enabled</code>
</span>
</dt>
<dd>
如果设置为 <code class="literal">false</code>，则在该 realm 中禁用对身份验证的支持，这就仅支持用户查找了。
(参考 <a class="xref" href="run-as-privilege.html" title="Submitting requests on behalf of other users">运行方式 (run as)</a> 和 <a class="xref" href="realm-chains.html#authorization_realms" title="Delegating authorization to another realm">授权 realms</a> 功能)。
默认为 <code class="literal">true</code>。
</dd>
</dl>
</div>
<h5>
<a id="ref-ldap-settings"></a>LDAP realm 设置
</h5>
<p>
<code class="literal">type</code> 设置必须设置为 <code class="literal">ldap</code>。

除了<a class="xref" href="security-settings.html#ref-realm-settings" title="Settings valid for all realms">对所有realm都有效的设置</a>之外，你还可以指定以下可选设置:
</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">url</code>
</span>
</dt>
<dd>
<p>
<code class="literal">ldap[s]://&lt;server&gt;:&lt;port&gt;</code> 格式的一个或多个 LDAP url地址。必填。
</p>
<p>
如果要提供多个 url 地址，使用 YAML 数组 (<code class="literal">["ldap://server1:636", "ldap://server2:636"]</code>) 或者逗号分隔的字符串 (<code class="literal">"ldap://server1:636, ldap://server2:636"</code>)。
</p>
<p>
虽然两者都受支持，但是不能混合使用<code class="literal">ldap</code>和<code class="literal">ldaps</code>协议。
</p>
</dd>
<dt>
<span class="term">
<code class="literal">load_balance.type</code>
</span>
</dt>
<dd>
定义了多个 LDAP url地址时使用的行为。
关于支持的值，请参考 <a class="xref" href="security-settings.html#load-balancing" title="Load balancing and failover">负载均衡和故障转移类型</a>。
默认值为 <code class="literal">failover</code>。
</dd>
<dt>
<span class="term">
<code class="literal">load_balance.cache_ttl</code>
</span>
</dt>
<dd>
当负载均衡的类型为 <code class="literal">dns_failover</code> 或 <code class="literal">dns_round_robin</code> 时，这个设置用来控制 DNS 查找缓存的时间。
默认值为 <code class="literal">1h</code>。
</dd>
<dt>
<span class="term">
<code class="literal">bind_dn</code>
</span>
</dt>
<dd>
用于绑定到 LDAP 并执行搜索的用户的 DN。
仅适用于用户搜索模式。
如果未指定，则尝试匿名绑定。
默认值为空。
由于潜在的安全影响，<code class="literal">bind_dn</code> 没有通过 <a class="xref" href="cluster-nodes-info.html" title="Nodes info API">节点信息API</a>公开。
</dd>
<dt>
<span class="term">
<code class="literal">bind_password</code>
</span>
</dt>
<dd>
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">6.3</span>]
<span class="Admonishment-detail">
在 6.3 中废弃
</span>
</span> 使用 <code class="literal">secure_bind_password</code> 替代之。
用于绑定到 LDAP 目录的用户密码。
默认值为空。
由于潜在的安全影响，<code class="literal">bind_password</code> 没有通过 <a class="xref" href="cluster-nodes-info.html" title="Nodes info API">节点信息API</a>公开。
</dd>
<dt>
<span class="term">
<code class="literal">secure_bind_password</code> (<a class="xref" href="secure-settings.html" title="Secure settings">安全</a>)
</span>
</dt>
<dd>
用于绑定到 LDAP 目录的用户密码。
默认值为空。
</dd>
<dt>
<span class="term">
<code class="literal">user_dn_templates</code>
</span>
</dt>
<dd>
用字符串<code class="literal">{0}</code>替换用户名的 DN 模板。
该设置是 多值的(multivalued)，你可以指定多个用户上下文。
需要在用户模板模式下操作。
如果指定了 <code class="literal">user_search.base_dn</code>，则此设置无效。
有关不同模式的更多信息，请参考<a class="xref" href="ldap-realm.html" title="LDAP user authentication">LDAP 用户身份验证</a>。
</dd>
<dt>
<span class="term">
<code class="literal">authorization_realms</code>
</span>
</dt>
<dd>
<p>
委托授权时应咨询的 realm 的名称。
如果使用此设置，则 LDAP realm 不执行角色映射，而是从列出的 realms 加载用户。
被引用的 realms 按照它们在列表中定义的顺序进行查询。
参考 <a class="xref" href="realm-chains.html#authorization_realms" title="Delegating authorization to another realm">将授权委托给另一个 realm</a>。
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>
如果指定的任何一个设置以 <code class="literal">user_search</code> 开头，则 <code class="literal">user_dn_templates</code> 设置将无效。
</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">user_group_attribute</code>
</span>
</dt>
<dd>
指定要检查用户组成员关系的属性。
如果指定了任何 <code class="literal">group_search</code> 设置，该设置将被忽略。
默认为 <code class="literal">memberOf</code>。
</dd>
<dt>
<span class="term">
<code class="literal">user_search.base_dn</code>
</span>
</dt>
<dd>
为用户搜索所指定的容器 DN。
需要在用户搜索模式下操作。
如果指定了 <code class="literal">user_dn_templates</code>，则此设置无效。
有关不同模式的更多信息，请参考<a class="xref" href="ldap-realm.html" title="LDAP user authentication">LDAP 用户身份验证</a>。
</dd>
<dt>
<span class="term">
<code class="literal">user_search.scope</code>
</span>
</dt>
<dd>
用户搜索的范围。
有效值包括<code class="literal">sub_tree</code>、<code class="literal">one_level</code>、<code class="literal">base</code>。
<code class="literal">one_level</code> 搜索直接包含在 <code class="literal">base_dn</code>中的对象。
<code class="literal">sub_tree</code> 搜索 <code class="literal">base_dn</code> 中的所有对象。
<code class="literal">base</code> 指定 <code class="literal">base_dn</code> 是用户对象，并且是唯一被考虑的用户。
默认值为 <code class="literal">sub_tree</code>。
</dd>
<dt>
<span class="term">
<code class="literal">user_search.filter</code>
</span>
</dt>
<dd>
指定用于搜索目录的过滤器，以尝试将条目与用户提供的用户名相匹配。
默认值为 <code class="literal">(uid={0})</code>。
<code class="literal">{0}</code> 会被替换为搜索时提供的用户名。
</dd>
<dt>
<span class="term">
<code class="literal">user_search.attribute</code>
</span>
</dt>
<dd>
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">5.6</span>]
<span class="Admonishment-detail">
Deprecated in 5.6.
</span>
</span> Use <code class="literal">user_search.filter</code> instead.
The attribute to match with the username sent with the request. Defaults to <code class="literal">uid</code>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.enabled</code>
</span>
</dt>
<dd>
Enables or disables connection pooling for user search. If set to <code class="literal">false</code>, a new
connection is created for every search. The
default is <code class="literal">true</code> when <code class="literal">bind_dn</code> is set.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.size</code>
</span>
</dt>
<dd>
The maximum number of connections to the LDAP server to allow in the
connection pool. Defaults to <code class="literal">20</code>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.initial_size</code>
</span>
</dt>
<dd>
The initial number of connections to create to the LDAP server on startup.
Defaults to <code class="literal">0</code>. If the LDAP server is down, values greater than <code class="literal">0</code> could cause
startup failures.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.health_check.enabled</code>
</span>
</dt>
<dd>
Enables or disables a health check on LDAP connections in the connection
pool. Connections are checked in the background at the specified interval.
Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.health_check.dn</code>
</span>
</dt>
<dd>
The distinguished name that is retrieved as part of the health check.
Defaults to the value of <code class="literal">bind_dn</code> if present; if
not, falls back to <code class="literal">user_search.base_dn</code>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.health_check.interval</code>
</span>
</dt>
<dd>
The interval to perform background checks of connections in the pool.
Defaults to <code class="literal">60s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">group_search.base_dn</code>
</span>
</dt>
<dd>
The container DN to search for groups in which the user has membership. When
this element is absent, Elasticsearch searches for the attribute specified by
<code class="literal">user_group_attribute</code> set on the user in order to determine group membership.
</dd>
<dt>
<span class="term">
<code class="literal">group_search.scope</code>
</span>
</dt>
<dd>
Specifies whether the group search should be <code class="literal">sub_tree</code>, <code class="literal">one_level</code> or
<code class="literal">base</code>.  <code class="literal">one_level</code> only searches objects directly contained within the
<code class="literal">base_dn</code>. <code class="literal">sub_tree</code> searches all objects contained under <code class="literal">base_dn</code>.
<code class="literal">base</code> specifies that the <code class="literal">base_dn</code> is a group object, and that it is the
only group considered. Defaults to  <code class="literal">sub_tree</code>.
</dd>
<dt>
<span class="term">
<code class="literal">group_search.filter</code>
</span>
</dt>
<dd>
Specifies a filter to use to look up a group.
When not set, the realm searches for <code class="literal">group</code>, <code class="literal">groupOfNames</code>, <code class="literal">groupOfUniqueNames</code>,
or <code class="literal">posixGroup</code> with the attributes <code class="literal">member</code>, <code class="literal">memberOf</code>, or <code class="literal">memberUid</code>.  Any
instance of <code class="literal">{0}</code> in the filter is replaced by the user attribute defined in
<code class="literal">group_search.user_attribute</code>.
</dd>
<dt>
<span class="term">
<code class="literal">group_search.user_attribute</code>
</span>
</dt>
<dd>
Specifies the user attribute that is fetched and provided as a parameter to
the filter.  If not set, the user DN is passed into the filter. Defaults to Empty.
</dd>
<dt>
<span class="term">
<code class="literal">unmapped_groups_as_roles</code>
</span>
</dt>
<dd>
If set to <code class="literal">true</code>, the names of any unmapped LDAP groups are used as role names
and assigned to the user. A group is considered to be <em>unmapped</em> if it is not
referenced in a <a class="xref" href="mapping-roles.html#mapping-roles-file" title="Using role mapping files">role-mapping file</a>. API-based
role mappings are not considered. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">files.role_mapping</code>
</span>
</dt>
<dd>
The <a class="xref" href="security-files.html" title="Security files">location</a> for the
<a class="xref" href="mapping-roles.html" title="Mapping users and groups to roles">YAML role mapping configuration file</a>. Defaults to
<code class="literal">ES_PATH_CONF/role_mapping.yml</code>.
</dd>
<dt>
<span class="term">
<code class="literal">follow_referrals</code>
</span>
</dt>
<dd>
Specifies whether Elasticsearch should follow referrals returned
by the LDAP server. Referrals are URLs returned by the server that are to be
used to continue the LDAP operation (for example, search). Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">metadata</code>
</span>
</dt>
<dd>
A list of additional LDAP attributes that should be loaded from the
LDAP server and stored in the authenticated user’s metadata field.
</dd>
<dt>
<span class="term">
<code class="literal">timeout.tcp_connect</code>
</span>
</dt>
<dd>
The TCP connect timeout period for establishing an LDAP connection.
An <code class="literal">s</code> at the end indicates seconds, or <code class="literal">ms</code> indicates milliseconds.
Defaults to <code class="literal">5s</code> (5 seconds ).
</dd>
<dt>
<span class="term">
<code class="literal">timeout.tcp_read</code>
</span>
</dt>
<dd>
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.7</span>]
<span class="Admonishment-detail">
Deprecated in 7.7.
</span>
</span> The TCP read timeout period after establishing an LDAP
connection. This is equivalent to and is deprecated in favor of
<code class="literal">timeout.response</code> and they cannot be used simultaneously. An <code class="literal">s</code> at the end
indicates seconds, or <code class="literal">ms</code> indicates milliseconds.
</dd>
<dt>
<span class="term">
<code class="literal">timeout.response</code>
</span>
</dt>
<dd>
The time interval to wait for the response from the LDAP server. An <code class="literal">s</code> at the
end indicates seconds, or <code class="literal">ms</code> indicates milliseconds. Defaults to the value of
<code class="literal">timeout.ldap_search</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout.ldap_search</code>
</span>
</dt>
<dd>
The timeout period for an LDAP search. The value is specified in the request
and is enforced by the receiving LDAP Server.
An <code class="literal">s</code> at the end indicates seconds, or <code class="literal">ms</code> indicates milliseconds.
Defaults to <code class="literal">5s</code> (5 seconds ).
</dd>
<dt>
<span class="term">
<code class="literal">ssl.key</code>
</span>
</dt>
<dd>
<p>
Path to a PEM encoded file containing the private key.
</p>
<p>If the LDAP server requires client authentication, it uses this file. You cannot
use this setting and <code class="literal">ssl.keystore.path</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.key_passphrase</code>
</span>
</dt>
<dd>
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.secure_key_passphrase</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.certificate</code>
</span>
</dt>
<dd>
<p>
Specifies the path for the PEM encoded certificate (or certificate chain) that is
associated with the key.
</p>
<p>This certificate is presented to clients when they connect.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.certificate_authorities</code>
</span>
</dt>
<dd>
<p>
List of paths to PEM encoded certificate files that should be trusted.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.path</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.path</code>
</span>
</dt>
<dd>
<p>
The path for the keystore file that contains a private key and certificate.
</p>
<p>You cannot use this setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.type</code>
</span>
</dt>
<dd>
The format of the keystore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults
to <code class="literal">PKCS12</code>. Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.password</code>
</span>
</dt>
<dd>
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.secure_password</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.key_password</code>
</span>
</dt>
<dd>
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.secure_key_password</code>
</span>
</dt>
<dd>
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.truststore.path</code>
</span>
</dt>
<dd>
<p>
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.truststore.password</code>
</span>
</dt>
<dd>
The password for the truststore.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.truststore.secure_password</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
Password for the truststore.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.truststore.type</code>
</span>
</dt>
<dd>
The format of the truststore file. For the Java keystore format, use <code class="literal">jks</code>. For
PKCS#12 files, use <code class="literal">PKCS12</code>. For a PKCS#11 token, use <code class="literal">PKCS11</code>. The default is
<code class="literal">jks</code>.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.verification_mode</code>
</span>
</dt>
<dd>
<p>
Indicates the type of verification when using <code class="literal">ldaps</code> to protect against man
in the middle attacks and certificate forgery.
Valid values are:
</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">full</code>, which verifies that the provided certificate is signed by a trusted
authority (CA) and also verifies that the server’s hostname (or IP address)
matches the names identified within the certificate.
</li>
<li class="listitem">
<code class="literal">certificate</code>, which verifies that the provided certificate is signed by a
trusted authority (CA), but does not perform any hostname verification.
</li>
<li class="listitem">
<p><code class="literal">none</code>, which performs <em>no verification</em> of the server’s certificate. This
mode disables many of the security benefits of SSL/TLS and should only be used
after very careful consideration. It is primarily intended as a temporary
diagnostic mechanism when attempting to resolve TLS errors; its use on
production clusters is strongly discouraged.</p>
<p>The default value is <code class="literal">full</code>.</p>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.supported_protocols</code>
</span>
</dt>
<dd>
<p>
Supported protocols with versions. Valid protocols: <code class="literal">SSLv2Hello</code>,
<code class="literal">SSLv3</code>, <code class="literal">TLSv1</code>, <code class="literal">TLSv1.1</code>, <code class="literal">TLSv1.2</code>, <code class="literal">TLSv1.3</code>. If the JVM’s SSL provider supports TLSv1.3,
the default is <code class="literal">TLSv1.3,TLSv1.2,TLSv1.1</code>. Otherwise, the default is
<code class="literal">TLSv1.2,TLSv1.1</code>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If <code class="literal">xpack.security.fips_mode.enabled</code> is <code class="literal">true</code>, you cannot use <code class="literal">SSLv2Hello</code>
or <code class="literal">SSLv3</code>. See <a class="xref" href="fips-140-compliance.html" title="FIPS 140-2">FIPS 140-2</a>.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.cipher_suites</code>
</span>
</dt>
<dd>
<p>
Specifies the cipher suites that should be supported when
communicating with the LDAP server.
Supported cipher suites vary depending on which version of Java you use. For
example, for version 11 the default value is <code class="literal">TLS_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_AES_128_GCM_SHA256</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA</code>, <code class="literal">TLS_RSA_WITH_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_RSA_WITH_AES_128_GCM_SHA256</code>, <code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA256</code>, <code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA</code>,
<code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA</code>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The default cipher suites list above includes TLSv1.3 ciphers and ciphers
that require the <em>Java Cryptography Extension (JCE) Unlimited Strength
Jurisdiction Policy Files</em> for 256-bit AES encryption. If TLSv1.3 is not
available, the TLSv1.3 ciphers <code class="literal">TLS_AES_256_GCM_SHA384</code> and
<code class="literal">TLS_AES_128_GCM_SHA256</code> are not included in the default list. If 256-bit AES is
unavailable, ciphers with <code class="literal">AES_256</code> in their names are not included in the
default list. Finally, AES GCM has known performance issues in Java versions
prior to 11 and is included in the default list only when using Java 11 or above.</p>
</div>
</div>
<p>For more information, see Oracle’s
<a href="https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2" class="ulink" target="_top">Java Cryptography Architecture documentation</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">cache.ttl</code>
</span>
</dt>
<dd>
缓存的用户的生存时间。
在这段时间内，用户及其凭证的哈希值将被缓存。
用 Elasticsearch 标准的<a class="xref" href="common-options.html#time-units" title="Time units">time units (时间单位)</a>指定时间段。
默认为 <code class="literal">20m</code> 即 20 分钟。
</dd>
<dt>
<span class="term">
<code class="literal">cache.max_users</code>
</span>
</dt>
<dd>
Specifies the maximum number of user entries that the cache can contain.
Defaults to <code class="literal">100000</code>.
</dd>
<dt>
<span class="term">
<code class="literal">cache.hash_algo</code>
</span>
</dt>
<dd>
(Expert Setting) Specifies the hashing algorithm that is used for the
in-memory cached user credentials. See <a class="xref" href="security-settings.html#cache-hash-algo" title="Cache hash algorithms">Table 1, “Cache hash algorithms”</a>. Defaults to <code class="literal">ssha256</code>.
</dd>
<dt>
<span class="term">
<code class="literal">authentication.enabled</code>
</span>
</dt>
<dd>
如果设置为 <code class="literal">false</code>，则在该 realm 中禁用对身份验证的支持，这就仅支持用户查找了。
(参考 <a class="xref" href="run-as-privilege.html" title="Submitting requests on behalf of other users">运行方式 (run as)</a> 和 <a class="xref" href="realm-chains.html#authorization_realms" title="Delegating authorization to another realm">授权 realms</a> 功能)。
默认为 <code class="literal">true</code>。
</dd>
</dl>
</div>
<h5>
<a id="ref-ad-settings"></a>Active Directory realm settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.7/docs/reference/settings/security-settings.asciidoc">edit</a>
</h5>
<p>The <code class="literal">type</code> setting must be set to <code class="literal">active_directory</code>. 
除了<a class="xref" href="security-settings.html#ref-realm-settings" title="Settings valid for all realms">对所有realm都有效的设置</a>之外，你还可以指定以下可选设置:
</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">url</code>
</span>
</dt>
<dd>
<p>
<code class="literal">ldap[s]://&lt;server&gt;:&lt;port&gt;</code> 格式的一个或多个 LDAP url地址。
默认为 <code class="literal">ldap://&lt;domain_name&gt;:389</code>。
 
This setting is required when connecting using SSL/TLS or when using a custom port.
</p>
<p>
如果要提供多个 url 地址，使用 YAML 数组 (<code class="literal">["ldap://server1:636", "ldap://server2:636"]</code>) 或者逗号分隔的字符串 (<code class="literal">"ldap://server1:636, ldap://server2:636"</code>)。
</p>
<p>
虽然两者都受支持，但是不能混合使用<code class="literal">ldap</code>和<code class="literal">ldaps</code>协议。
</p>
<p>
If no URL is provided, Elasticsearch uses a default of <code class="literal">ldap://&lt;domain_name&gt;:389</code>.

This default uses the <code class="literal">domain_name</code> setting value and assumes an unencrypted connection to port 389.
</p>
</dd>
<dt>
<span class="term">
<code class="literal">load_balance.type</code>
</span>
</dt>
<dd>
定义了多个 LDAP url地址时使用的行为。
关于支持的值，请参考 <a class="xref" href="security-settings.html#load-balancing" title="Load balancing and failover">负载均衡和故障转移类型</a>。
默认值为 <code class="literal">failover</code>。
</dd>
<dt>
<span class="term">
<code class="literal">load_balance.cache_ttl</code>
</span>
</dt>
<dd>
当负载均衡的类型为 <code class="literal">dns_failover</code> 或 <code class="literal">dns_round_robin</code> 时，这个设置用来控制 DNS 查找缓存的时间。
默认值为 <code class="literal">1h</code>。
</dd>
<dt>
<span class="term">
<code class="literal">domain_name</code>
</span>
</dt>
<dd>
The domain name of Active Directory. If the <code class="literal">url</code> and the <code class="literal">user_search.base_dn</code>
settings are not specified, the cluster can derive those values from this
setting. Required.
</dd>
<dt>
<span class="term">
<code class="literal">bind_dn</code>
</span>
</dt>
<dd>
The DN of the user that is used to bind to Active Directory and perform searches.
Defaults to Empty.
由于潜在的安全影响，<code class="literal">bind_dn</code> 没有通过 <a class="xref" href="cluster-nodes-info.html" title="Nodes info API">节点信息API</a>公开。
</dd>
<dt>
<span class="term">
<code class="literal">bind_password</code>
</span>
</dt>
<dd>
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">6.3</span>]
<span class="Admonishment-detail">
Deprecated in 6.3.
</span>
</span> Use <code class="literal">secure_bind_password</code> instead. The password for the user
that is used to bind to Active Directory. Defaults to Empty. Due to its
potential security impact, <code class="literal">bind_password</code> is not exposed via the
<a class="xref" href="cluster-nodes-info.html" title="Nodes info API">nodes info API</a>.
</dd>
<dt>
<span class="term">
<code class="literal">secure_bind_password</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
The password for the user that is used to bind to Active Directory.
Defaults to Empty.
</dd>
<dt>
<span class="term">
<code class="literal">unmapped_groups_as_roles</code>
</span>
</dt>
<dd>
If set to <code class="literal">true</code>, the names of any unmapped Active Directory groups are used as
role names and assigned to the user. A group is considered <em>unmapped</em> when it
is not referenced in any role-mapping files. API-based role mappings are not
considered. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">files.role_mapping</code>
</span>
</dt>
<dd>
The <a class="xref" href="security-files.html" title="Security files">location</a> for the YAML
role mapping configuration file. Defaults to <code class="literal">ES_PATH_CONF/role_mapping.yml</code>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.base_dn</code>
</span>
</dt>
<dd>
The context to search for a user. Defaults to the root
of the Active Directory domain.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.scope</code>
</span>
</dt>
<dd>
Specifies whether the user search should be <code class="literal">sub_tree</code>, <code class="literal">one_level</code> or <code class="literal">base</code>.
<code class="literal">one_level</code> only searches users directly contained within the <code class="literal">base_dn</code>.
<code class="literal">sub_tree</code> searches all objects contained under <code class="literal">base_dn</code>. <code class="literal">base</code>
specifies that the <code class="literal">base_dn</code> is a user object, and that it is the
only user considered. Defaults to <code class="literal">sub_tree</code>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.filter</code>
</span>
</dt>
<dd>
Specifies a filter to use to lookup a user given a username.  The default
filter looks up <code class="literal">user</code> objects with either <code class="literal">sAMAccountName</code> or
<code class="literal">userPrincipalName</code>. If specified, this must be a valid LDAP user search filter.
For example <code class="literal">(&amp;(objectClass=user)(sAMAccountName={0}))</code>. For more information,
see
<a href="https://msdn.microsoft.com/en-us/library/aa746475(v=vs.85).aspx" class="ulink" target="_top">Search Filter Syntax</a>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.upn_filter</code>
</span>
</dt>
<dd>
Specifies a filter to use to lookup a user given a user principal name.
The default filter looks up <code class="literal">user</code> objects with
a matching <code class="literal">userPrincipalName</code>. If specified, this
must be a valid LDAP user search filter. For example,
<code class="literal">(&amp;(objectClass=user)(userPrincipalName={1}))</code>. <code class="literal">{1}</code> is the full user principal name
provided by the user. For more information, see
<a href="https://msdn.microsoft.com/en-us/library/aa746475(v=vs.85).aspx" class="ulink" target="_top">Search Filter Syntax</a>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.down_level_filter</code>
</span>
</dt>
<dd>
Specifies a filter to use to lookup a user given a down level logon name
(DOMAIN\user). The default filter looks up <code class="literal">user</code> objects with a matching
<code class="literal">sAMAccountName</code> in the domain provided. If specified, this
must be a valid LDAP user search filter. For example,
<code class="literal">(&amp;(objectClass=user)(sAMAccountName={0}))</code>. For more information, see
<a href="https://msdn.microsoft.com/en-us/library/aa746475(v=vs.85).aspx" class="ulink" target="_top">Search Filter Syntax</a>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.enabled</code>
</span>
</dt>
<dd>
Enables or disables connection pooling for user search. When
disabled a new connection is created for every search. The
default is <code class="literal">true</code> when <code class="literal">bind_dn</code> is provided.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.size</code>
</span>
</dt>
<dd>
The maximum number of connections to the Active Directory server to allow in the
connection pool. Defaults to <code class="literal">20</code>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.initial_size</code>
</span>
</dt>
<dd>
The initial number of connections to create to the Active Directory server on startup.
Defaults to <code class="literal">0</code>. If the LDAP server is down, values greater than 0
could cause startup failures.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.health_check.enabled</code>
</span>
</dt>
<dd>
Enables or disables a health check on Active Directory connections in the connection
pool. Connections are checked in the background at the specified interval.
Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.health_check.dn</code>
</span>
</dt>
<dd>
The distinguished name to be retrieved as part of the health check.
Defaults to the value of <code class="literal">bind_dn</code> if that setting is present. Otherwise, it
defaults to the value of the <code class="literal">user_search.base_dn</code> setting.
</dd>
<dt>
<span class="term">
<code class="literal">user_search.pool.health_check.interval</code>
</span>
</dt>
<dd>
The interval to perform background checks of connections in the pool.
Defaults to <code class="literal">60s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">group_search.base_dn</code>
</span>
</dt>
<dd>
The context to search for groups in which the user has membership.  Defaults
to the root of the Active Directory domain.
</dd>
<dt>
<span class="term">
<code class="literal">group_search.scope</code>
</span>
</dt>
<dd>
Specifies whether the group search should be <code class="literal">sub_tree</code>, <code class="literal">one_level</code> or
<code class="literal">base</code>.  <code class="literal">one_level</code> searches for groups directly contained within the
<code class="literal">base_dn</code>. <code class="literal">sub_tree</code> searches all objects contained under <code class="literal">base_dn</code>.
<code class="literal">base</code> specifies that the <code class="literal">base_dn</code> is a group object, and that it is
the only group considered. Defaults to <code class="literal">sub_tree</code>.
</dd>
<dt>
<span class="term">
<code class="literal">metadata</code>
</span>
</dt>
<dd>
A list of additional LDAP attributes that should be loaded from the
LDAP server and stored in the authenticated user’s metadata field.
</dd>
<dt>
<span class="term">
<code class="literal">timeout.tcp_connect</code>
</span>
</dt>
<dd>
The TCP connect timeout period for establishing an LDAP connection.
An <code class="literal">s</code> at the end indicates seconds, or <code class="literal">ms</code> indicates milliseconds.
Defaults to <code class="literal">5s</code> (5 seconds ).
</dd>
<dt>
<span class="term">
<code class="literal">timeout.tcp_read</code>
</span>
</dt>
<dd>
<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.7</span>]
<span class="Admonishment-detail">
Deprecated in 7.7.
</span>
</span> The TCP read timeout period after establishing an LDAP
connection.  This is equivalent to and is deprecated in favor of
<code class="literal">timeout.response</code> and they cannot be used simultaneously. An <code class="literal">s</code> at the end
indicates seconds, or <code class="literal">ms</code> indicates milliseconds. Defaults to the value of
<code class="literal">timeout.ldap_search</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout.response</code>
</span>
</dt>
<dd>
The time interval to wait for the response from the AD server. An <code class="literal">s</code> at the
end indicates seconds, or <code class="literal">ms</code> indicates milliseconds. Defaults to the value of
<code class="literal">timeout.ldap_search</code>.
</dd>
<dt>
<span class="term">
<code class="literal">timeout.ldap_search</code>
</span>
</dt>
<dd>
The timeout period for an LDAP search. The value is specified in the request
and is enforced by the receiving LDAP Server.
An <code class="literal">s</code> at the end indicates seconds, or <code class="literal">ms</code> indicates milliseconds.
Defaults to <code class="literal">5s</code> (5 seconds ).
</dd>
<dt>
<span class="term">
<code class="literal">ssl.certificate</code>
</span>
</dt>
<dd>
<p>
Specifies the path for the PEM encoded certificate (or certificate chain) that is
associated with the key.
</p>
<p>This certificate is presented to clients when they connect.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.certificate_authorities</code>
</span>
</dt>
<dd>
<p>
List of paths to PEM encoded certificate files that should be trusted.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.path</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.key</code>
</span>
</dt>
<dd>
<p>
Path to a PEM encoded file containing the private key.
</p>
<p>If the Active Directory server requires client authentication, it uses this file.
You cannot use this setting and <code class="literal">ssl.keystore.path</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.key_passphrase</code>
</span>
</dt>
<dd>
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.secure_key_passphrase</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.key_password</code>
</span>
</dt>
<dd>
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.secure_key_password</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.password</code>
</span>
</dt>
<dd>
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.secure_keystore.password</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
The password for the keystore.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.keystore.path</code>
</span>
</dt>
<dd>
<p>
The path for the keystore file that contains a private key and certificate.
</p>
<p>You cannot use this setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.type</code>
</span>
</dt>
<dd>
The format of the keystore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults
to <code class="literal">PKCS12</code>. Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.truststore.password</code>
</span>
</dt>
<dd>
The password for the truststore.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.truststore.secure_password</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
Password for the truststore.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.truststore.path</code>
</span>
</dt>
<dd>
<p>
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.truststore.type</code>
</span>
</dt>
<dd>
The format of the truststore file. For the Java keystore format, use <code class="literal">jks</code>. For
PKCS#12 files, use <code class="literal">PKCS12</code>. For a PKCS#11 token, use <code class="literal">PKCS11</code>. The default is
<code class="literal">jks</code>.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.verification_mode</code>
</span>
</dt>
<dd>
<p>
Indicates the type of verification when using <code class="literal">ldaps</code> to protect against man
in the middle attacks and certificate forgery.
Valid values are:
</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">full</code>, which verifies that the provided certificate is signed by a trusted
authority (CA) and also verifies that the server’s hostname (or IP address)
matches the names identified within the certificate.
</li>
<li class="listitem">
<code class="literal">certificate</code>, which verifies that the provided certificate is signed by a
trusted authority (CA), but does not perform any hostname verification.
</li>
<li class="listitem">
<p><code class="literal">none</code>, which performs <em>no verification</em> of the server’s certificate. This
mode disables many of the security benefits of SSL/TLS and should only be used
after very careful consideration. It is primarily intended as a temporary
diagnostic mechanism when attempting to resolve TLS errors; its use on
production clusters is strongly discouraged.</p>
<p>The default value is <code class="literal">full</code>.</p>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.supported_protocols</code>
</span>
</dt>
<dd>
<p>
Supported protocols with versions. Valid protocols: <code class="literal">SSLv2Hello</code>,
<code class="literal">SSLv3</code>, <code class="literal">TLSv1</code>, <code class="literal">TLSv1.1</code>, <code class="literal">TLSv1.2</code>, <code class="literal">TLSv1.3</code>. If the JVM’s SSL provider supports TLSv1.3,
the default is <code class="literal">TLSv1.3,TLSv1.2,TLSv1.1</code>. Otherwise, the default is
<code class="literal">TLSv1.2,TLSv1.1</code>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If <code class="literal">xpack.security.fips_mode.enabled</code> is <code class="literal">true</code>, you cannot use <code class="literal">SSLv2Hello</code>
or <code class="literal">SSLv3</code>. See <a class="xref" href="fips-140-compliance.html" title="FIPS 140-2">FIPS 140-2</a>.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.cipher_suites</code>
</span>
</dt>
<dd>
<p>
Specifies the cipher suites that should be supported when
communicating with the Active Directory server.
Supported cipher suites vary depending on which version of Java you use. For
example, for version 11 the default value is <code class="literal">TLS_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_AES_128_GCM_SHA256</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA</code>, <code class="literal">TLS_RSA_WITH_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_RSA_WITH_AES_128_GCM_SHA256</code>, <code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA256</code>, <code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA</code>,
<code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA</code>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The default cipher suites list above includes TLSv1.3 ciphers and ciphers
that require the <em>Java Cryptography Extension (JCE) Unlimited Strength
Jurisdiction Policy Files</em> for 256-bit AES encryption. If TLSv1.3 is not
available, the TLSv1.3 ciphers <code class="literal">TLS_AES_256_GCM_SHA384</code> and
<code class="literal">TLS_AES_128_GCM_SHA256</code> are not included in the default list. If 256-bit AES is
unavailable, ciphers with <code class="literal">AES_256</code> in their names are not included in the
default list. Finally, AES GCM has known performance issues in Java versions
prior to 11 and is included in the default list only when using Java 11 or above.</p>
</div>
</div>
<p>For more information, see Oracle’s
<a href="https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2" class="ulink" target="_top">Java Cryptography Architecture documentation</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">cache.ttl</code>
</span>
</dt>
<dd>
缓存的用户的生存时间。
在这段时间内，用户及其凭证的哈希值将被缓存。
用 Elasticsearch 标准的<a class="xref" href="common-options.html#time-units" title="Time units">time units (时间单位)</a>指定时间段。
默认为 <code class="literal">20m</code> 即 20 分钟。
</dd>
<dt>
<span class="term">
<code class="literal">cache.max_users</code>
</span>
</dt>
<dd>
Specifies the maximum number of user entries that the cache can contain.
Defaults to <code class="literal">100000</code>.
</dd>
<dt>
<span class="term">
<code class="literal">cache.hash_algo</code>
</span>
</dt>
<dd>
(Expert Setting) Specifies the hashing algorithm that is used for
the in-memory cached user credentials. See <a class="xref" href="security-settings.html#cache-hash-algo" title="Cache hash algorithms">Table 1, “Cache hash algorithms”</a>. Defaults to <code class="literal">ssha256</code>.
</dd>
<dt>
<span class="term">
<code class="literal">authentication.enabled</code>
</span>
</dt>
<dd>
如果设置为 <code class="literal">false</code>，则在该 realm 中禁用对身份验证的支持，这就仅支持用户查找了。
(参考 <a class="xref" href="run-as-privilege.html" title="Submitting requests on behalf of other users">运行方式 (run as)</a> 和 <a class="xref" href="realm-chains.html#authorization_realms" title="Delegating authorization to another realm">授权 realms</a> 功能)。
默认为 <code class="literal">true</code>。
</dd>
<dt>
<span class="term">
<code class="literal">follow_referrals</code>
</span>
</dt>
<dd>
If set to <code class="literal">true</code>, Elasticsearch follows referrals returned by the LDAP server.
Referrals are URLs returned by the server that are to be used to continue the
LDAP operation (such as <code class="literal">search</code>). Defaults to <code class="literal">true</code>.
</dd>
</dl>
</div>
<h5>
<a id="ref-pki-settings"></a>PKI realm settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.7/docs/reference/settings/security-settings.asciidoc">edit</a>
</h5>
<p>The <code class="literal">type</code> setting must be set to <code class="literal">pki</code>. 
除了<a class="xref" href="security-settings.html#ref-realm-settings" title="Settings valid for all realms">对所有realm都有效的设置</a>之外，你还可以指定以下可选设置:
</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">username_pattern</code>
</span>
</dt>
<dd>
The regular expression pattern used to extract the username from the
certificate DN. The first match group is the used as the username.
Defaults to <code class="literal">CN=(.*?)(?:,\|$)</code>.
</dd>
<dt>
<span class="term">
<code class="literal">certificate_authorities</code>
</span>
</dt>
<dd>
List of paths to the PEM certificate files that should be used to authenticate a
user’s certificate as trusted. Defaults to the trusted certificates configured
for SSL. This setting cannot be used with <code class="literal">truststore.path</code>.
</dd>
<dt>
<span class="term">
<code class="literal">truststore.algorithm</code>
</span>
</dt>
<dd>
Algorithm for the truststore. Defaults to <code class="literal">SunX509</code>.
</dd>
<dt>
<span class="term">
<code class="literal">truststore.password</code>
</span>
</dt>
<dd>
The password for the truststore.
</dd>
</dl>
</div>
<p>If <code class="literal">truststore.path</code> is set, this setting is required.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">truststore.secure_password</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
Password for the truststore.
</dd>
<dt>
<span class="term">
<code class="literal">truststore.path</code>
</span>
</dt>
<dd>
The path of a truststore to use. Defaults to the trusted certificates configured
for SSL. This setting cannot be used with <code class="literal">certificate_authorities</code>.
</dd>
<dt>
<span class="term">
<code class="literal">files.role_mapping</code>
</span>
</dt>
<dd>
Specifies the <a class="xref" href="security-files.html" title="Security files">location</a> of the
<a class="xref" href="mapping-roles.html" title="Mapping users and groups to roles">YAML role  mapping configuration file</a>.
Defaults to <code class="literal">ES_PATH_CONF/role_mapping.yml</code>.
</dd>
<dt>
<span class="term">
<code class="literal">authorization_realms</code>
</span>
</dt>
<dd>
委托授权时应咨询的 realm 的名称。
如果使用此设置，则 KPI realm 不执行角色映射，而是从列出的 realms 加载用户。
参考 <a class="xref" href="realm-chains.html#authorization_realms" title="Delegating authorization to another realm">将授权委托给另一个 realm</a>。
</dd>
<dt>
<span class="term">
<code class="literal">cache.ttl</code>
</span>
</dt>
<dd>
缓存的用户的生存时间。
在这段时间内，用户及其凭证的哈希值将被缓存。
用 Elasticsearch 标准的<a class="xref" href="common-options.html#time-units" title="Time units">time units (时间单位)</a>指定时间段。
默认为 <code class="literal">20m</code> 即 20 分钟。
</dd>
<dt>
<span class="term">
<code class="literal">cache.max_users</code>
</span>
</dt>
<dd>
Specifies the maximum number of user entries that the cache can contain.
Defaults to <code class="literal">100000</code>.
</dd>
<dt>
<span class="term">
<code class="literal">delegation.enabled</code>
</span>
</dt>
<dd>
Generally, in order for the clients to be authenticated by the PKI realm they
must connect directly to Elasticsearch. That is, they must not pass through proxies
which terminate the TLS connection. In order to allow for a <span class="strong strong"><strong>trusted</strong></span> and
<span class="strong strong"><strong>smart</strong></span> proxy, such as Kibana, to sit before Elasticsearch and terminate TLS
connections, but still allow clients to be authenticated on Elasticsearch by this realm,
you need to toggle this to <code class="literal">true</code>. Defaults to <code class="literal">false</code>. If delegation is
enabled, then either <code class="literal">truststore.path</code> or <code class="literal">certificate_authorities</code> setting
must be defined. For more details, see <a class="xref" href="pki-realm.html#pki-realm-for-proxied-clients" title="PKI authentication for clients connecting to Kibana">Configuring authentication delegation for PKI realms</a>.
</dd>
</dl>
</div>
<h5>
<a id="ref-saml-settings"></a>SAML realm settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.7/docs/reference/settings/security-settings.asciidoc">edit</a>
</h5>
<p>The <code class="literal">type</code> setting must be set to <code class="literal">saml</code>. 
除了<a class="xref" href="security-settings.html#ref-realm-settings" title="Settings valid for all realms">对所有realm都有效的设置</a>之外，你还可以指定以下可选设置:
</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">idp.entity_id</code>
</span>
</dt>
<dd>
The Entity ID of the SAML Identity Provider. An Entity ID is a URI with a
maximum length of 1024 characters. It can be a URL (<a href="https://idp.example.com/" class="ulink" target="_top">https://idp.example.com/</a>) or
a URN (<code class="literal">urn:example.com:idp</code>) and can be found in the configuration or the SAML
metadata of the Identity Provider.
</dd>
<dt>
<span class="term">
<code class="literal">idp.metadata.path</code>
</span>
</dt>
<dd>
The path <em>(recommended)</em> or URL to a SAML 2.0 metadata file describing the
capabilities and configuration of the Identity Provider.
If a path is provided, then it is resolved relative to the Elasticsearch config
directory.
If a URL is provided, then it must be either a <code class="literal">file</code> URL or a <code class="literal">https</code> URL.
Elasticsearch automatically polls this metadata resource and reloads
the IdP configuration when changes are detected.
File based resources are polled at a frequency determined by the global Elasticsearch
<code class="literal">resource.reload.interval.high</code> setting, which defaults to 5 seconds.
HTTPS resources are polled at a frequency determined by the realm’s
<code class="literal">idp.metadata.http.refresh</code> setting.
</dd>
<dt>
<span class="term">
<code class="literal">idp.metadata.http.refresh</code>
</span>
</dt>
<dd>
Controls the frequency with which <code class="literal">https</code> metadata is checked for changes.
Defaults to <code class="literal">1h</code> (1 hour).
</dd>
<dt>
<span class="term">
<code class="literal">idp.use_single_logout</code>
</span>
</dt>
<dd>
Indicates whether to utilise the Identity Provider’s Single Logout service
(if one exists in the IdP metadata file).
Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">sp.entity_id</code>
</span>
</dt>
<dd>
The Entity ID to use for this SAML Service Provider. This should be entered as a
URI. We recommend that you use the base URL of your Kibana instance. For example,
<code class="literal">https://kibana.example.com/</code>.
</dd>
<dt>
<span class="term">
<code class="literal">sp.acs</code>
</span>
</dt>
<dd>
The URL of the Assertion Consumer Service within Kibana. Typically this is the
"api/security/v1/saml" endpoint of your Kibana server. For example,
<code class="literal">https://kibana.example.com/api/security/v1/saml</code>.
</dd>
<dt>
<span class="term">
<code class="literal">sp.logout</code>
</span>
</dt>
<dd>
The URL of the Single Logout service within Kibana. Typically this is the
"logout" endpoint of your Kibana server. For example,
<code class="literal">https://kibana.example.com/logout</code>.
</dd>
<dt>
<span class="term">
<code class="literal">attributes.principal</code>
</span>
</dt>
<dd>
The Name of the SAML attribute that contains the user’s principal (username).
</dd>
<dt>
<span class="term">
<code class="literal">attributes.groups</code>
</span>
</dt>
<dd>
The Name of the SAML attribute that contains the user’s groups.
</dd>
<dt>
<span class="term">
<code class="literal">attributes.name</code>
</span>
</dt>
<dd>
The Name of the SAML attribute that contains the user’s full name.
</dd>
<dt>
<span class="term">
<code class="literal">attributes.mail</code>
</span>
</dt>
<dd>
The Name of the SAML attribute that contains the user’s email address.
</dd>
<dt>
<span class="term">
<code class="literal">attributes.dn</code>
</span>
</dt>
<dd>
The Name of the SAML attribute that contains the user’s X.50
<em>Distinguished Name</em>.
</dd>
<dt>
<span class="term">
<code class="literal">attribute_patterns.principal</code>
</span>
</dt>
<dd>
A Java regular expression that is matched against the SAML attribute specified
by <code class="literal">attributes.pattern</code> before it is applied to the user’s <em>principal</em> property.
The attribute value must match the pattern and the value of the first
<em>capturing group</em> is used as the principal. For example, <code class="literal">^([^@]+)@example\\.com$</code>
matches email addresses from the "example.com" domain and uses the local-part as
the principal.
</dd>
<dt>
<span class="term">
<code class="literal">attribute_patterns.groups</code>
</span>
</dt>
<dd>
As per <code class="literal">attribute_patterns.principal</code>, but for the <em>group</em> property.
</dd>
<dt>
<span class="term">
<code class="literal">attribute_patterns.name</code>
</span>
</dt>
<dd>
As per <code class="literal">attribute_patterns.principal</code>, but for the <em>name</em> property.
</dd>
<dt>
<span class="term">
<code class="literal">attribute_patterns.mail</code>
</span>
</dt>
<dd>
As per <code class="literal">attribute_patterns.principal</code>, but for the <em>mail</em> property.
</dd>
<dt>
<span class="term">
<code class="literal">attribute_patterns.dn</code>
</span>
</dt>
<dd>
As per <code class="literal">attribute_patterns.principal</code>, but for the <em>dn</em> property.
</dd>
<dt>
<span class="term">
<code class="literal">nameid_format</code>
</span>
</dt>
<dd>
The NameID format that should be requested when asking the IdP to authenticate
the current user. Defaults to requesting <em>transient</em> names
(<code class="literal">urn:oasis:names:tc:SAML:2.0:nameid-format:transient</code>).
</dd>
<dt>
<span class="term">
<code class="literal">nameid.allow_create</code>
</span>
</dt>
<dd>
The value of the <code class="literal">AllowCreate</code> attribute of the
<code class="literal">NameIdPolicy</code> element in an authentication request. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">nameid.sp_qualifier</code>
</span>
</dt>
<dd>
The value of the <code class="literal">SPNameQualifier</code> attribute of the
<code class="literal">NameIdPolicy</code> element in an authentication request. The default is to not
include the <code class="literal">SPNameQualifier</code> attribute.
</dd>
<dt>
<span class="term">
<code class="literal">force_authn</code>
</span>
</dt>
<dd>
Specifies whether to set the <code class="literal">ForceAuthn</code> attribute when requesting that the IdP
authenticate the current user. If set to <code class="literal">true</code>, the IdP is required to verify
the user’s identity, irrespective of any existing sessions they might have.
Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">populate_user_metadata</code>
</span>
</dt>
<dd>
Specifies whether to populate the Elasticsearch user’s metadata with the values that are
provided by the SAML attributes. Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">authorization_realms</code>
</span>
</dt>
<dd>
委托授权时应咨询的 realm 的名称。
如果使用此设置，则 SAML realm 不执行角色映射，而是从列出的 realms 加载用户。
参考 <a class="xref" href="realm-chains.html#authorization_realms" title="Delegating authorization to another realm">将授权委托给另一个 realm</a>。
</dd>
<dt>
<span class="term">
<code class="literal">allowed_clock_skew</code>
</span>
</dt>
<dd>
The maximum amount of skew that can be tolerated between the IdP’s clock and the
Elasticsearch node’s clock.
Defaults to <code class="literal">3m</code> (3 minutes).
</dd>
<dt>
<span class="term">
<code class="literal">req_authn_context_class_ref</code>
</span>
</dt>
<dd>
<p>
A comma separated list of Authentication Context Class Reference values to be
included in the Requested Authentication Context when requesting the IdP to
authenticate the current user. The Authentication Context of the corresponding
authentication response should contain at least one of the requested values.
</p>
<p>For more information, see
<a class="xref" href="saml-guide-authentication.html#req-authn-context" title="Requesting specific authentication methods">Requesting specific authentication methods</a>.</p>
</dd>
</dl>
</div>
<h5>
<a id="ref-saml-signing-settings"></a>SAML realm signing settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.7/docs/reference/settings/security-settings.asciidoc">edit</a>
</h5>
<p>If a signing key is configured (that is, either <code class="literal">signing.key</code> or
<code class="literal">signing.keystore.path</code> is set), then Elasticsearch signs outgoing SAML messages.
Signing can be configured using the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">signing.saml_messages</code>
</span>
</dt>
<dd>
A list of SAML message types that should be signed or <code class="literal">*</code> to sign all messages.
Each element in the list should be the local name of a SAML XML Element.
Supported element types are <code class="literal">AuthnRequest</code>, <code class="literal">LogoutRequest</code> and <code class="literal">LogoutResponse</code>.
Only valid if <code class="literal">signing.key</code> or <code class="literal">signing.keystore.path</code> is also specified.
Defaults to <code class="literal">*</code>.
</dd>
<dt>
<span class="term">
<code class="literal">signing.key</code>
</span>
</dt>
<dd>
Specifies the path to the PEM encoded private key to use for SAML message signing.
<code class="literal">signing.key</code> and <code class="literal">signing.keystore.path</code> cannot be used at the same time.
</dd>
<dt>
<span class="term">
<code class="literal">signing.secure_key_passphrase</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
Specifies the passphrase to decrypt the PEM encoded private key (<code class="literal">signing.key</code>)
if it is encrypted.
</dd>
<dt>
<span class="term">
<code class="literal">signing.certificate</code>
</span>
</dt>
<dd>
Specifies the path to the PEM encoded certificate (or certificate chain) that
corresponds to the <code class="literal">signing.key</code>. This certificate must also be included in the
Service Provider metadata or manually configured within the IdP to allow for
signature validation. This setting can only be used if <code class="literal">signing.key</code> is set.
</dd>
<dt>
<span class="term">
<code class="literal">signing.keystore.path</code>
</span>
</dt>
<dd>
The path to the keystore that contains a private key and certificate. It must be
either a Java keystore (jks) or a PKCS#12 file. You cannot use this setting and
<code class="literal">signing.key</code> at the same time.
</dd>
<dt>
<span class="term">
<code class="literal">signing.keystore.type</code>
</span>
</dt>
<dd>
The type of the keystore in <code class="literal">signing.keystore.path</code>.
Must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the keystore path ends in ".p12", ".pfx",
or "pkcs12", this setting defaults to <code class="literal">PKCS12</code>. Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
<dt>
<span class="term">
<code class="literal">signing.keystore.alias</code>
</span>
</dt>
<dd>
Specifies the alias of the key within the keystore that should be
used for SAML message signing. If the keystore contains more than one private
key, this setting must be specified.
</dd>
<dt>
<span class="term">
<code class="literal">signing.keystore.secure_password</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
The password to the keystore in <code class="literal">signing.keystore.path</code>.
</dd>
<dt>
<span class="term">
<code class="literal">signing.keystore.secure_key_password</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
The password for the key in the keystore (<code class="literal">signing.keystore.path</code>).
Defaults to the keystore password.
</dd>
</dl>
</div>
<h5>
<a id="ref-saml-encryption-settings"></a>SAML realm encryption settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.7/docs/reference/settings/security-settings.asciidoc">edit</a>
</h5>
<p>If an encryption key is configured (that is, either <code class="literal">encryption.key</code> or
<code class="literal">encryption.keystore.path</code> is set), then Elasticsearch publishes an encryption
certificate when generating metadata and attempts to decrypt incoming SAML
content. Encryption can be configured using the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">encryption.key</code>
</span>
</dt>
<dd>
Specifies the path to the PEM encoded private key to use for SAML message
decryption.
<code class="literal">encryption.key</code> and <code class="literal">encryption.keystore.path</code> cannot be used at the same time.
</dd>
<dt>
<span class="term">
<code class="literal">encryption.secure_key_passphrase</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
Specifies the passphrase to decrypt the PEM encoded private key
(<code class="literal">encryption.key</code>) if it is encrypted.
</dd>
<dt>
<span class="term">
<code class="literal">encryption.certificate</code>
</span>
</dt>
<dd>
Specifies the path to the PEM encoded certificate (or certificate chain) that is
associated with the <code class="literal">encryption.key</code>. This certificate must also be included in
the Service Provider metadata or manually configured within the IdP to enable
message encryption. This setting can be used only if <code class="literal">encryption.key</code> is set.
</dd>
<dt>
<span class="term">
<code class="literal">encryption.keystore.path</code>
</span>
</dt>
<dd>
The path to the keystore that contains a private key and certificate. It must be
either a Java keystore (jks) or a PKCS#12 file. You cannot use this setting and
<code class="literal">encryption.key</code> at the same time.
</dd>
<dt>
<span class="term">
<code class="literal">encryption.keystore.type</code>
</span>
</dt>
<dd>
The type of the keystore (<code class="literal">encryption.keystore.path</code>).
Must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the keystore path ends in ".p12", ".pfx",
or "pkcs12", this setting defaults to <code class="literal">PKCS12</code>. Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
<dt>
<span class="term">
<code class="literal">encryption.keystore.alias</code>
</span>
</dt>
<dd>
Specifies the alias of the key within the keystore (<code class="literal">encryption.keystore.path</code>)
that should be used for SAML message decryption. If not specified, all compatible
key pairs from the keystore are considered as candidate keys for decryption.
</dd>
<dt>
<span class="term">
<code class="literal">encryption.keystore.secure_password</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
The password to the keystore (<code class="literal">encryption.keystore.path</code>).
</dd>
<dt>
<span class="term">
<code class="literal">encryption.keystore.secure_key_password</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
The password for the key in the keystore (<code class="literal">encryption.keystore.path</code>). Only a
single password is supported. If you are using multiple decryption keys,
they cannot have individual passwords.
</dd>
</dl>
</div>
<h5>
<a id="ref-saml-ssl-settings"></a>SAML realm SSL settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.7/docs/reference/settings/security-settings.asciidoc">edit</a>
</h5>
<p>If you are loading the IdP metadata over SSL/TLS (that is, <code class="literal">idp.metadata.path</code>
is a URL using the <code class="literal">https</code> protocol), the following settings can be used to
configure SSL.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>These settings are not used for any purpose other than loading metadata
over https.</p>
</div>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.key</code>
</span>
</dt>
<dd>
<p>
Path to a PEM encoded file containing the private key.
</p>
<p>If HTTP client authentication is required, it uses this file. You cannot use
this setting and <code class="literal">ssl.keystore.path</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.key_passphrase</code>
</span>
</dt>
<dd>
<p>
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</p>
<p>You cannot use this setting and <code class="literal">ssl.secure_key_passphrase</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.secure_key_passphrase</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
<p>
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</p>
<p>You cannot use this setting and <code class="literal">ssl.key_passphrase</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.certificate</code>
</span>
</dt>
<dd>
<p>
Specifies the path for the PEM encoded certificate (or certificate chain) that is
associated with the key.
</p>
<p>This setting can be used only if <code class="literal">ssl.key</code> is set.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.certificate_authorities</code>
</span>
</dt>
<dd>
<p>
List of paths to PEM encoded certificate files that should be trusted.
</p>
<p>This setting and <code class="literal">ssl.truststore.path</code> cannot be used at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.path</code>
</span>
</dt>
<dd>
<p>
The path for the keystore file that contains a private key and certificate.
</p>
<p>It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this
setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.type</code>
</span>
</dt>
<dd>
The format of the keystore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults
to <code class="literal">PKCS12</code>. Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.password</code>
</span>
</dt>
<dd>
<p>
The password for the keystore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.secure_password</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
<p>
The password for the keystore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.key_password</code>
</span>
</dt>
<dd>
<p>
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_key_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.secure_key_password</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
The password for the key in the keystore. The default is the keystore password.
</dd>
</dl>
</div>
<p>You cannot use this setting and <code class="literal">ssl.keystore.key_password</code> at the same time.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.truststore.path</code>
</span>
</dt>
<dd>
<p>
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.truststore.type</code>
</span>
</dt>
<dd>
The format of the truststore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
file name ends in ".p12", ".pfx" or "pkcs12", the default is <code class="literal">PKCS12</code>.
Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.truststore.password</code>
</span>
</dt>
<dd>
<p>
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.truststore.secure_password</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
<p>
Password for the truststore.
</p>
<p>This setting cannot be used with <code class="literal">ssl.truststore.password</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.verification_mode</code>
</span>
</dt>
<dd>
<p>
Controls the verification of certificates.
Valid values are:
</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">full</code>, which verifies that the provided certificate is signed by a trusted
authority (CA) and also verifies that the server’s hostname (or IP address)
matches the names identified within the certificate.
</li>
<li class="listitem">
<code class="literal">certificate</code>, which verifies that the provided certificate is signed by a
trusted authority (CA), but does not perform any hostname verification.
</li>
<li class="listitem">
<p><code class="literal">none</code>, which performs <em>no verification</em> of the server’s certificate. This
mode disables many of the security benefits of SSL/TLS and should only be used
after very careful consideration. It is primarily intended as a temporary
diagnostic mechanism when attempting to resolve TLS errors; its use on
production clusters is strongly discouraged.</p>
<p>The default value is <code class="literal">full</code>.</p>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.supported_protocols</code>
</span>
</dt>
<dd>
<p>
Supported protocols with versions. Valid protocols: <code class="literal">SSLv2Hello</code>,
<code class="literal">SSLv3</code>, <code class="literal">TLSv1</code>, <code class="literal">TLSv1.1</code>, <code class="literal">TLSv1.2</code>, <code class="literal">TLSv1.3</code>. If the JVM’s SSL provider supports TLSv1.3,
the default is <code class="literal">TLSv1.3,TLSv1.2,TLSv1.1</code>. Otherwise, the default is
<code class="literal">TLSv1.2,TLSv1.1</code>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If <code class="literal">xpack.security.fips_mode.enabled</code> is <code class="literal">true</code>, you cannot use <code class="literal">SSLv2Hello</code>
or <code class="literal">SSLv3</code>. See <a class="xref" href="fips-140-compliance.html" title="FIPS 140-2">FIPS 140-2</a>.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.cipher_suites</code>
</span>
</dt>
<dd>
<p>
Supported cipher suites vary depending on which version of Java you use. For
example, for version 11 the default value is <code class="literal">TLS_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_AES_128_GCM_SHA256</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA</code>, <code class="literal">TLS_RSA_WITH_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_RSA_WITH_AES_128_GCM_SHA256</code>, <code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA256</code>, <code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA</code>,
<code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA</code>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The default cipher suites list above includes TLSv1.3 ciphers and ciphers
that require the <em>Java Cryptography Extension (JCE) Unlimited Strength
Jurisdiction Policy Files</em> for 256-bit AES encryption. If TLSv1.3 is not
available, the TLSv1.3 ciphers <code class="literal">TLS_AES_256_GCM_SHA384</code> and
<code class="literal">TLS_AES_128_GCM_SHA256</code> are not included in the default list. If 256-bit AES is
unavailable, ciphers with <code class="literal">AES_256</code> in their names are not included in the
default list. Finally, AES GCM has known performance issues in Java versions
prior to 11 and is included in the default list only when using Java 11 or above.</p>
</div>
</div>
<p>For more information, see Oracle’s
<a href="https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2" class="ulink" target="_top">Java Cryptography Architecture documentation</a>.</p>
</dd>
</dl>
</div>
<h5>
<a id="ref-kerberos-settings"></a>Kerberos realm settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.7/docs/reference/settings/security-settings.asciidoc">edit</a>
</h5>
<p>For a Kerberos realm, the <code class="literal">type</code> must be set to <code class="literal">kerberos</code>. 
除了<a class="xref" href="security-settings.html#ref-realm-settings" title="Settings valid for all realms">对所有realm都有效的设置</a>之外，你还可以指定以下可选设置:
</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">keytab.path</code>
</span>
</dt>
<dd>
Specifies the path to the Kerberos keytab file that contains the
service principal used by this Elasticsearch node. This must be a location within the
Elasticsearch configuration directory and the file must have read permissions. Required.
</dd>
<dt>
<span class="term">
<code class="literal">remove_realm_name</code>
</span>
</dt>
<dd>
Set to <code class="literal">true</code> to remove the realm part of principal names.
Principal names in Kerberos have the form <code class="literal">user/instance@REALM</code>. If this option
is <code class="literal">true</code>, the realm part (<code class="literal">@REALM</code>) will not be included in the username.
Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">krb.debug</code>
</span>
</dt>
<dd>
Set to <code class="literal">true</code> to enable debug logs for the Java login module that
provides support for Kerberos authentication. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">cache.ttl</code>
</span>
</dt>
<dd>
缓存的用户的生存时间。
在这段时间内，用户将被缓存。
用 Elasticsearch 标准的<a class="xref" href="common-options.html#time-units" title="Time units">time units (时间单位)</a>指定时间段。
默认为 <code class="literal">20m</code> 即 20 分钟。
</dd>
<dt>
<span class="term">
<code class="literal">cache.max_users</code>
</span>
</dt>
<dd>
在任何给定时间内，可以存在于缓存中的最大用户数量。默认为 100,000。
</dd>
<dt>
<span class="term">
<code class="literal">authorization_realms</code>
</span>
</dt>
<dd>
委托授权时应咨询的 realm 的名称。
如果使用此设置，则 Kerberos realm 不执行角色映射，而是从列出的 realms 加载用户。
参考 <a class="xref" href="realm-chains.html#authorization_realms" title="Delegating authorization to another realm">将授权委托给另一个 realm</a>。
</dd>
</dl>
</div>
<h5>
<a id="ref-oidc-settings"></a>OpenID Connect realm settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.7/docs/reference/settings/security-settings.asciidoc">edit</a>
</h5>
<p>
除了<a class="xref" href="security-settings.html#ref-realm-settings" title="Settings valid for all realms">对所有realm都有效的设置</a>之外，你还可以指定以下可选设置:
</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">op.issuer</code>
</span>
</dt>
<dd>
A verifiable Identifier for your OpenID Connect Provider. An Issuer
Identifier is usually a case sensitive URL using the https scheme that contains
scheme, host, and optionally, port number and path components and no query or
fragment components. The value for this setting should be provided by your OpenID
Connect Provider.
</dd>
<dt>
<span class="term">
<code class="literal">op.authorization_endpoint</code>
</span>
</dt>
<dd>
The URL for the Authorization Endpoint at the
OpenID Connect Provider. The value for this setting should be provided by your OpenID
Connect Provider.
</dd>
<dt>
<span class="term">
<code class="literal">op.token_endpoint</code>
</span>
</dt>
<dd>
The URL for the Token Endpoint at the OpenID Connect Provider.
The value for this setting should be provided by your OpenID Connect Provider.
</dd>
<dt>
<span class="term">
<code class="literal">op.userinfo_endpoint</code>
</span>
</dt>
<dd>
The URL for the User Info Endpoint at the OpenID Connect Provider.
The value for this setting should be provided by your OpenID Connect Provider.
</dd>
<dt>
<span class="term">
<code class="literal">op.endsession_endpoint</code>
</span>
</dt>
<dd>
The URL for the End Session Endpoint at the OpenID Connect
Provider. The value for this setting should be provided by your OpenID Connect Provider.
</dd>
<dt>
<span class="term">
<code class="literal">op.jwkset_path</code>
</span>
</dt>
<dd>
The path or URL to a JSON Web Key Set with the key material that the OpenID Connect
Provider uses for signing tokens and claims responses.
If a path is provided, then it is resolved relative to the Elasticsearch config
directory.
If a URL is provided, then it must be either a <code class="literal">file</code> URL or a <code class="literal">https</code> URL.
Elasticsearch automatically caches the retrieved JWK set to avoid unnecessary HTTP
requests but will attempt to refresh the JWK upon signature verification
failure, as this might indicate that the OpenID Connect Provider has
rotated the signing keys.
</dd>
</dl>
</div>
<p>File based resources are polled at a frequency determined by the global Elasticsearch
<code class="literal">resource.reload.interval.high</code> setting, which defaults to 5 seconds.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">rp.client_id</code>
</span>
</dt>
<dd>
The OAuth 2.0 Client Identifier that was assigned to Elasticsearch during registration
at the OpenID Connect Provider
</dd>
<dt>
<span class="term">
<code class="literal">rp.client_secret</code>(<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
The OAuth 2.0 Client Secret that was assigned to Elasticsearch during registration
at the OpenID Connect Provider
</dd>
<dt>
<span class="term">
<code class="literal">rp.redirect_uri</code>
</span>
</dt>
<dd>
The Redirect URI within Kibana. If you want to use the authorization code flow, this is the
"api/security/oidc/callback" endpoint of your Kibana server. If you want to use the implicit flow,  it is the "api/security/oidc/implicit" endpoint.
For example, <code class="literal">https://kibana.example.com/api/security/oidc/callback</code>.
</dd>
<dt>
<span class="term">
<code class="literal">rp.response_type</code>
</span>
</dt>
<dd>
OAuth 2.0 Response Type value that determines the authorization
processing flow to be used. Can be <code class="literal">code</code> for authorization code grant flow,
or one of <code class="literal">id_token</code>, <code class="literal">id_token token</code> for the implicit flow.
</dd>
<dt>
<span class="term">
<code class="literal">rp.signature_algorithm</code>
</span>
</dt>
<dd>
The signature algorithm that will be used by Elasticsearch in order to verify the
signature of the id tokens it will receive from the OpenID Connect Provider.
Defaults to <code class="literal">RSA256</code>
</dd>
<dt>
<span class="term">
<code class="literal">rp.requested_scopes</code>
</span>
</dt>
<dd>
The scope values that will be requested by the OpenID Connect Provider as
part of the Authentication Request. Optional, defaults to <code class="literal">openid</code>
</dd>
<dt>
<span class="term">
<code class="literal">rp.post_logout_redirect_uri</code>
</span>
</dt>
<dd>
The Redirect URI (usually within Kibana) that the OpenID Connect Provider
should redirect the browser to after a successful Single Logout.
</dd>
<dt>
<span class="term">
<code class="literal">claims.principal</code>
</span>
</dt>
<dd>
The name of the OpenID Connect claim that contains the user’s principal (username).
</dd>
<dt>
<span class="term">
<code class="literal">claims.groups</code>
</span>
</dt>
<dd>
The name of the OpenID Connect claim that contains the user’s groups.
</dd>
<dt>
<span class="term">
<code class="literal">claims.name</code>
</span>
</dt>
<dd>
The name of the OpenID Connect claim that contains the user’s full name.
</dd>
<dt>
<span class="term">
<code class="literal">claims.mail</code>
</span>
</dt>
<dd>
The name of the OpenID Connect claim that contains the user’s email address.
</dd>
<dt>
<span class="term">
<code class="literal">claims.dn</code>
</span>
</dt>
<dd>
The name of the OpenID Connect claim that contains the user’s X.509
<em>Distinguished Name</em>.
</dd>
<dt>
<span class="term">
<code class="literal">claim_patterns.principal</code>
</span>
</dt>
<dd>
A Java regular expression that is matched against the OpenID Connect claim specified
by <code class="literal">claims.principal</code> before it is applied to the user’s <em>principal</em> property.
The attribute value must match the pattern and the value of the first
<em>capturing group</em> is used as the principal. For example, <code class="literal">^([^@]+)@example\\.com$</code>
matches email addresses from the "example.com" domain and uses the local-part as
the principal.
</dd>
<dt>
<span class="term">
<code class="literal">claim_patterns.groups</code>
</span>
</dt>
<dd>
As per <code class="literal">claim_patterns.principal</code>, but for the <em>group</em> property.
</dd>
<dt>
<span class="term">
<code class="literal">claim_patterns.name</code>
</span>
</dt>
<dd>
As per <code class="literal">claim_patterns.principal</code>, but for the <em>name</em> property.
</dd>
<dt>
<span class="term">
<code class="literal">claim_patterns.mail</code>
</span>
</dt>
<dd>
As per <code class="literal">claim_patterns.principal</code>, but for the <em>mail</em> property.
</dd>
<dt>
<span class="term">
<code class="literal">claim_patterns.dn</code>
</span>
</dt>
<dd>
As per <code class="literal">claim_patterns.principal</code>, but for the <em>dn</em> property.
</dd>
<dt>
<span class="term">
<code class="literal">allowed_clock_skew</code>
</span>
</dt>
<dd>
The maximum allowed clock skew to be taken into consideration when validating
id tokens with regards to their creation and expiration times.
</dd>
<dt>
<span class="term">
<code class="literal">populate_user_metadata</code>
</span>
</dt>
<dd>
Specifies whether to populate the Elasticsearch user’s metadata with the values that are
provided by the OpenID Connect claims. Defaults to <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.connect_timeout</code>
</span>
</dt>
<dd>
Controls the behavior of the http client used for back-channel communication to
the OpenID Connect Provider endpoints. Specifies the timeout until a connection
 is established. A value of zero means the timeout is not used. Defaults to <code class="literal">5s</code>
</dd>
<dt>
<span class="term">
<code class="literal">http.connection_read_timeout</code>
</span>
</dt>
<dd>
Controls the behavior of the http client used for back-channel communication to
the OpenID Connect Provider endpoints. Specifies the timeout used when
requesting a connection from the connection manager. Defaults to <code class="literal">5s</code>
</dd>
<dt>
<span class="term">
<code class="literal">http.socket_timeout</code>
</span>
</dt>
<dd>
Controls the behavior of the http client used for back-channel communication to
the OpenID Connect Provider endpoints. Specifies the socket timeout (SO_TIMEOUT)
in milliseconds, which is the timeout for waiting for data or, put differently,
a maximum period inactivity between two consecutive data packets). Defaults to
<code class="literal">5s</code>
</dd>
<dt>
<span class="term">
<code class="literal">http.max_connections</code>
</span>
</dt>
<dd>
Controls the behavior of the http client used for back-channel communication to
the OpenID Connect Provider endpoints. Specifies the maximum number of
connections allowed across all endpoints.
</dd>
<dt>
<span class="term">
<code class="literal">http.max_endpoint_connections</code>
</span>
</dt>
<dd>
Controls the behavior of the http client used for back-channel communication to
the OpenID Connect Provider endpoints. Specifies the maximum number of
connections allowed per endpoint.
</dd>
</dl>
</div>
<h5>
<a id="ref-oidc-ssl-settings"></a>OpenID Connect realm SSL settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.7/docs/reference/settings/security-settings.asciidoc">edit</a>
</h5>
<p>The following settings can be used to configure SSL for all outgoing http connections
to the OpenID Connect Provider endpoints.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>These settings are <em>only</em> used for the back-channel communication between
Elasticsearch and the OpenID Connect Provider</p>
</div>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ssl.key</code>
</span>
</dt>
<dd>
<p>
Path to a PEM encoded file containing the private key.
</p>
<p>If HTTP client authentication is required, it uses this file. You cannot use
this setting and <code class="literal">ssl.keystore.path</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.key_passphrase</code>
</span>
</dt>
<dd>
<p>
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</p>
<p>You cannot use this setting and <code class="literal">ssl.secure_key_passphrase</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.secure_key_passphrase</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
<p>
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</p>
<p>You cannot use this setting and <code class="literal">ssl.key_passphrase</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.certificate</code>
</span>
</dt>
<dd>
<p>
Specifies the path for the PEM encoded certificate (or certificate chain) that is
associated with the key.
</p>
<p>This setting can be used only if <code class="literal">ssl.key</code> is set.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.certificate_authorities</code>
</span>
</dt>
<dd>
<p>
List of paths to PEM encoded certificate files that should be trusted.
</p>
<p>This setting and <code class="literal">ssl.truststore.path</code> cannot be used at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.path</code>
</span>
</dt>
<dd>
<p>
The path for the keystore file that contains a private key and certificate.
</p>
<p>It must be either a Java keystore (jks) or a PKCS#12 file. You cannot use this
setting and <code class="literal">ssl.key</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.type</code>
</span>
</dt>
<dd>
The format of the keystore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults
to <code class="literal">PKCS12</code>. Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.password</code>
</span>
</dt>
<dd>
<p>
The password for the keystore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.secure_password</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
<p>
The password for the keystore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.key_password</code>
</span>
</dt>
<dd>
<p>
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.secure_key_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.keystore.secure_key_password</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
<p>
The password for the key in the keystore. The default is the keystore password.
</p>
<p>You cannot use this setting and <code class="literal">ssl.keystore.key_password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.truststore.path</code>
</span>
</dt>
<dd>
<p>
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</p>
<p>You cannot use this setting and <code class="literal">ssl.certificate_authorities</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.truststore.type</code>
</span>
</dt>
<dd>
The format of the truststore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
file name ends in ".p12", ".pfx" or "pkcs12", the default is <code class="literal">PKCS12</code>.
Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
<dt>
<span class="term">
<code class="literal">ssl.truststore.password</code>
</span>
</dt>
<dd>
<p>
The password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.secure_password</code> at the same
time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.truststore.secure_password</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
<p>
Password for the truststore.
</p>
<p>You cannot use this setting and <code class="literal">ssl.truststore.password</code> at the same time.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.verification_mode</code>
</span>
</dt>
<dd>
<p>
Controls the verification of certificates.
Valid values are:
</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">full</code>, which verifies that the provided certificate is signed by a trusted
authority (CA) and also verifies that the server’s hostname (or IP address)
matches the names identified within the certificate.
</li>
<li class="listitem">
<code class="literal">certificate</code>, which verifies that the provided certificate is signed by a
trusted authority (CA), but does not perform any hostname verification.
</li>
<li class="listitem">
<p><code class="literal">none</code>, which performs <em>no verification</em> of the server’s certificate. This
mode disables many of the security benefits of SSL/TLS and should only be used
after very careful consideration. It is primarily intended as a temporary
diagnostic mechanism when attempting to resolve TLS errors; its use on
production clusters is strongly discouraged.</p>
<p>The default value is <code class="literal">full</code>.</p>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.supported_protocols</code>
</span>
</dt>
<dd>
<p>
Supported protocols with versions. Valid protocols: <code class="literal">SSLv2Hello</code>,
<code class="literal">SSLv3</code>, <code class="literal">TLSv1</code>, <code class="literal">TLSv1.1</code>, <code class="literal">TLSv1.2</code>, <code class="literal">TLSv1.3</code>. If the JVM’s SSL provider supports TLSv1.3,
the default is <code class="literal">TLSv1.3,TLSv1.2,TLSv1.1</code>. Otherwise, the default is
<code class="literal">TLSv1.2,TLSv1.1</code>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If <code class="literal">xpack.security.fips_mode.enabled</code> is <code class="literal">true</code>, you cannot use <code class="literal">SSLv2Hello</code>
or <code class="literal">SSLv3</code>. See <a class="xref" href="fips-140-compliance.html" title="FIPS 140-2">FIPS 140-2</a>.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">ssl.cipher_suites</code>
</span>
</dt>
<dd>
<p>
Supported cipher suites vary depending on which version of Java you use. For
example, for version 11 the default value is <code class="literal">TLS_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_AES_128_GCM_SHA256</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA</code>, <code class="literal">TLS_RSA_WITH_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_RSA_WITH_AES_128_GCM_SHA256</code>, <code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA256</code>, <code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA</code>,
<code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA</code>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The default cipher suites list above includes TLSv1.3 ciphers and ciphers
that require the <em>Java Cryptography Extension (JCE) Unlimited Strength
Jurisdiction Policy Files</em> for 256-bit AES encryption. If TLSv1.3 is not
available, the TLSv1.3 ciphers <code class="literal">TLS_AES_256_GCM_SHA384</code> and
<code class="literal">TLS_AES_128_GCM_SHA256</code> are not included in the default list. If 256-bit AES is
unavailable, ciphers with <code class="literal">AES_256</code> in their names are not included in the
default list. Finally, AES GCM has known performance issues in Java versions
prior to 11 and is included in the default list only when using Java 11 or above.</p>
</div>
</div>
<p>For more information, see Oracle’s
<a href="https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2" class="ulink" target="_top">Java Cryptography Architecture documentation</a>.</p>
</dd>
</dl>
</div>
<h5>
<a id="load-balancing"></a>负载均衡和失效 (load balancing and failover)
</h5>
<p>The <code class="literal">load_balance.type</code> setting can have the following values:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">failover</code>: The URLs specified are used in the order that they are specified.
The first server that can be connected to will be used for all subsequent
connections. If a connection to that server fails then the next server that a
connection can be established to will be used for subsequent connections.
</li>
<li class="listitem">
<code class="literal">dns_failover</code>: In this mode of operation, only a single URL may be specified.
This URL must contain a DNS name. The system will be queried for all IP
addresses that correspond to this DNS name. Connections to the Active Directory
or LDAP server will always be tried in the order in which they were retrieved.
This differs from <code class="literal">failover</code> in that there is no reordering of the list and if a
server has failed at the beginning of the list, it will still be tried for each
subsequent connection.
</li>
<li class="listitem">
<code class="literal">round_robin</code>: Connections will continuously iterate through the list of
provided URLs. If a server is unavailable, iterating through the list of URLs
will continue until a successful connection is made.
</li>
<li class="listitem">
<code class="literal">dns_round_robin</code>: In this mode of operation, only a single URL may be
specified. This URL must contain a DNS name. The system will be queried for all
IP addresses that correspond to this DNS name. Connections will continuously
iterate through the list of addresses. If a server is unavailable, iterating
through the list of URLs will continue until a successful connection is made.
</li>
</ul>
</div>
<h4>
<a id="ssl-tls-settings"></a>General TLS settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.7/docs/reference/settings/security-settings.asciidoc">edit</a>
</h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.ssl.diagnose.trust</code>
</span>
</dt>
<dd>
Controls whether to output diagnostic messages for SSL/TLS trust failures.
If this is <code class="literal">true</code> (the default), a message will be printed to the Elasticsearch
log whenever an SSL connection (incoming or outgoing) is rejected due to a failure
to establish trust.
This diagnostic message contains information that can be used to determine the
cause of the failure and assist with resolving the problem.
Set to <code class="literal">false</code> to disable these messages.
NOTE: This defaults to <code class="literal">false</code> when <code class="literal">xpack.security.fips_mode.enabled</code> is <code class="literal">true</code>.
</dd>
</dl>
</div>
<h5>
<a id="tls-ssl-key-settings"></a>TLS/SSL key and trusted certificate settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.7/docs/reference/settings/security-settings.asciidoc">edit</a>
</h5>
<p>The following settings are used to specify a private key, certificate, and the
trusted certificates that should be used when communicating over an SSL/TLS
connection. If no trusted certificates are configured, the default certificates
that are trusted by the JVM will be trusted along with the certificate(s)
associated with a key in the same context. The key and certificate must be in
place for connections that require client authentication or when acting as a
SSL enabled server.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<a id="pkcs12-truststore-note"></a>
<p>Storing trusted certificates in a PKCS#12 file, although supported, is
uncommon in practice. The <a class="xref" href="certutil.html" title="elasticsearch-certutil"><code class="literal">elasticsearch-certutil</code> tool</a>,
as well as Java’s <code class="literal">keytool</code>, are designed to generate PKCS#12 files that
can be used both as a keystore and as a truststore, but this may not be the
case for container files that are created using other tools. Usually,
PKCS#12 files only contain secret and private entries. To confirm that
a PKCS#12 container includes trusted certificate ("anchor") entries look for
<code class="literal">2.16.840.1.113894.746875.1.1: &lt;Unsupported tag 6&gt;</code> in the
<code class="literal">openssl pkcs12 -info</code> output, or <code class="literal">trustedCertEntry</code> in the
<code class="literal">keytool -list</code> output.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title">
<a id="http-tls-ssl-settings"></a>HTTP TLS/SSL settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.7/docs/reference/settings/ssl-settings.asciidoc">edit</a>
</h3>
</div></div></div>
<p>You can configure the following TLS/SSL settings.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.enabled</code>
</span>
</dt>
<dd>
Used to enable or disable TLS/SSL. The default is <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.supported_protocols</code>
</span>
</dt>
<dd>
<p>
Supported protocols with versions. Valid protocols: <code class="literal">SSLv2Hello</code>,
<code class="literal">SSLv3</code>, <code class="literal">TLSv1</code>, <code class="literal">TLSv1.1</code>, <code class="literal">TLSv1.2</code>, <code class="literal">TLSv1.3</code>. If the JVM’s SSL provider supports TLSv1.3,
the default is <code class="literal">TLSv1.3,TLSv1.2,TLSv1.1</code>. Otherwise, the default is
<code class="literal">TLSv1.2,TLSv1.1</code>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If <code class="literal">xpack.security.fips_mode.enabled</code> is <code class="literal">true</code>, you cannot use <code class="literal">SSLv2Hello</code>
or <code class="literal">SSLv3</code>. See <a class="xref" href="fips-140-compliance.html" title="FIPS 140-2">FIPS 140-2</a>.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.client_authentication</code>
</span>
</dt>
<dd>
Controls the server’s behavior in regard to requesting a certificate
from client connections. Valid values are <code class="literal">required</code>, <code class="literal">optional</code>, and <code class="literal">none</code>.
<code class="literal">required</code> forces a client to present a certificate, while <code class="literal">optional</code>
requests a client certificate but the client is not required to present one.
Defaults to <code class="literal">none</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.cipher_suites</code>
</span>
</dt>
<dd>
<p>
Supported cipher suites vary depending on which version of Java you use. For
example, for version 11 the default value is <code class="literal">TLS_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_AES_128_GCM_SHA256</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA</code>, <code class="literal">TLS_RSA_WITH_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_RSA_WITH_AES_128_GCM_SHA256</code>, <code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA256</code>, <code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA</code>,
<code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA</code>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The default cipher suites list above includes TLSv1.3 ciphers and ciphers
that require the <em>Java Cryptography Extension (JCE) Unlimited Strength
Jurisdiction Policy Files</em> for 256-bit AES encryption. If TLSv1.3 is not
available, the TLSv1.3 ciphers <code class="literal">TLS_AES_256_GCM_SHA384</code> and
<code class="literal">TLS_AES_128_GCM_SHA256</code> are not included in the default list. If 256-bit AES is
unavailable, ciphers with <code class="literal">AES_256</code> in their names are not included in the
default list. Finally, AES GCM has known performance issues in Java versions
prior to 11 and is included in the default list only when using Java 11 or above.</p>
</div>
</div>
<p>For more information, see Oracle’s
<a href="https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2" class="ulink" target="_top">Java Cryptography Architecture documentation</a>.</p>
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title">
<a id="security-http-tls-ssl-key-trusted-certificate-settings"></a>HTTP TLS/SSL key and trusted certificate settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.7/docs/reference/settings/ssl-settings.asciidoc">edit</a>
</h4>
</div></div></div>
<p>The following settings are used to specify a private key, certificate, and the
trusted certificates that should be used when communicating over an SSL/TLS connection.
A private key and certificate must be configured.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title">
<a id="_pem_encoded_files_2"></a>PEM encoded files<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.7/docs/reference/settings/ssl-settings.asciidoc">edit</a>
</h4>
</div></div></div>
<p>When using PEM encoded files, use the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.key</code>
</span>
</dt>
<dd>
Path to a PEM encoded file containing the private key.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.key_passphrase</code>
</span>
</dt>
<dd>
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.secure_key_passphrase</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.certificate</code>
</span>
</dt>
<dd>
Specifies the path for the PEM encoded certificate (or certificate chain) that is
associated with the key.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.certificate_authorities</code>
</span>
</dt>
<dd>
List of paths to PEM encoded certificate files that should be trusted.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title">
<a id="_java_keystore_files_2"></a>Java keystore files<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.7/docs/reference/settings/ssl-settings.asciidoc">edit</a>
</h4>
</div></div></div>
<p>When using Java keystore files (JKS), which contain the private key, certificate
and certificates that should be trusted, use the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.path</code>
</span>
</dt>
<dd>
The path for the keystore file that contains a private key and certificate.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.password</code>
</span>
</dt>
<dd>
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.secure_password</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.key_password</code>
</span>
</dt>
<dd>
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.secure_key_password</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.truststore.path</code>
</span>
</dt>
<dd>
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.truststore.password</code>
</span>
</dt>
<dd>
The password for the truststore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.truststore.secure_password</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
Password for the truststore.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title">
<a id="security-http-pkcs12-files"></a>PKCS#12 files<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.7/docs/reference/settings/ssl-settings.asciidoc">edit</a>
</h4>
</div></div></div>
<p>Elasticsearch can be configured to use PKCS#12 container files (<code class="literal">.p12</code> or <code class="literal">.pfx</code> files)
that contain the private key, certificate and certificates that should be trusted.</p>
<p>PKCS#12 files are configured in the same way as Java keystore files:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.path</code>
</span>
</dt>
<dd>
The path for the keystore file that contains a private key and certificate.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.type</code>
</span>
</dt>
<dd>
The format of the keystore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults
to <code class="literal">PKCS12</code>. Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.password</code>
</span>
</dt>
<dd>
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.secure_password</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.key_password</code>
</span>
</dt>
<dd>
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.keystore.secure_key_password</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.truststore.path</code>
</span>
</dt>
<dd>
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.truststore.type</code>
</span>
</dt>
<dd>
Set this to <code class="literal">PKCS12</code> to indicate that the truststore is a PKCS#12 file.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.truststore.password</code>
</span>
</dt>
<dd>
The password for the truststore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.ssl.truststore.secure_password</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
Password for the truststore.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title">
<a id="security-http-pkcs11-tokens"></a>PKCS#11 tokens<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.7/docs/reference/settings/ssl-settings.asciidoc">edit</a>
</h4>
</div></div></div>
<p>Elasticsearch can be configured to use a PKCS#11 token that contains the private key,
certificate and certificates that should be trusted.</p>
<p>PKCS#11 token require additional configuration on the JVM level and can be enabled
via the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.http.keystore.type</code>
</span>
</dt>
<dd>
Set this to <code class="literal">PKCS11</code> to indicate that the PKCS#11 token should be used as a keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.truststore.type</code>
</span>
</dt>
<dd>
The format of the truststore file. For the Java keystore format, use <code class="literal">jks</code>. For
PKCS#12 files, use <code class="literal">PKCS12</code>. For a PKCS#11 token, use <code class="literal">PKCS11</code>. The default is
<code class="literal">jks</code>.
</dd>
</dl>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>When configuring the PKCS#11 token that your JVM is configured to use as
a keystore or a truststore for Elasticsearch, the PIN for the token can be
configured by setting the appropriate value to <code class="literal">ssl.truststore.password</code>
or <code class="literal">ssl.truststore.secure_password</code> in the context that you are configuring.
Since there can only be one PKCS#11 token configured, only one keystore and
truststore will be usable for configuration in Elasticsearch. This in turn means
that only one certificate can be used for TLS both in the transport and the
http layer.</p>
</div>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title">
<a id="transport-tls-ssl-settings"></a>Transport TLS/SSL settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.7/docs/reference/settings/ssl-settings.asciidoc">edit</a>
</h3>
</div></div></div>
<p>You can configure the following TLS/SSL settings.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.enabled</code>
</span>
</dt>
<dd>
Used to enable or disable TLS/SSL. The default is <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.supported_protocols</code>
</span>
</dt>
<dd>
<p>
Supported protocols with versions. Valid protocols: <code class="literal">SSLv2Hello</code>,
<code class="literal">SSLv3</code>, <code class="literal">TLSv1</code>, <code class="literal">TLSv1.1</code>, <code class="literal">TLSv1.2</code>, <code class="literal">TLSv1.3</code>. If the JVM’s SSL provider supports TLSv1.3,
the default is <code class="literal">TLSv1.3,TLSv1.2,TLSv1.1</code>. Otherwise, the default is
<code class="literal">TLSv1.2,TLSv1.1</code>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If <code class="literal">xpack.security.fips_mode.enabled</code> is <code class="literal">true</code>, you cannot use <code class="literal">SSLv2Hello</code>
or <code class="literal">SSLv3</code>. See <a class="xref" href="fips-140-compliance.html" title="FIPS 140-2">FIPS 140-2</a>.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.client_authentication</code>
</span>
</dt>
<dd>
Controls the server’s behavior in regard to requesting a certificate
from client connections. Valid values are <code class="literal">required</code>, <code class="literal">optional</code>, and <code class="literal">none</code>.
<code class="literal">required</code> forces a client to present a certificate, while <code class="literal">optional</code>
requests a client certificate but the client is not required to present one.
Defaults to <code class="literal">none</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.verification_mode</code>
</span>
</dt>
<dd>
<p>
Controls the verification of certificates.
Valid values are:
</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">full</code>, which verifies that the provided certificate is signed by a trusted
authority (CA) and also verifies that the server’s hostname (or IP address)
matches the names identified within the certificate.
</li>
<li class="listitem">
<code class="literal">certificate</code>, which verifies that the provided certificate is signed by a
trusted authority (CA), but does not perform any hostname verification.
</li>
<li class="listitem">
<p><code class="literal">none</code>, which performs <em>no verification</em> of the server’s certificate. This
mode disables many of the security benefits of SSL/TLS and should only be used
after very careful consideration. It is primarily intended as a temporary
diagnostic mechanism when attempting to resolve TLS errors; its use on
production clusters is strongly discouraged.</p>
<p>The default value is <code class="literal">full</code>.</p>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.cipher_suites</code>
</span>
</dt>
<dd>
<p>
Supported cipher suites vary depending on which version of Java you use. For
example, for version 11 the default value is <code class="literal">TLS_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_AES_128_GCM_SHA256</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</code>, <code class="literal">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</code>,
<code class="literal">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA</code>, <code class="literal">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA</code>,
<code class="literal">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA</code>, <code class="literal">TLS_RSA_WITH_AES_256_GCM_SHA384</code>,
<code class="literal">TLS_RSA_WITH_AES_128_GCM_SHA256</code>, <code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA256</code>,
<code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA256</code>, <code class="literal">TLS_RSA_WITH_AES_256_CBC_SHA</code>,
<code class="literal">TLS_RSA_WITH_AES_128_CBC_SHA</code>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The default cipher suites list above includes TLSv1.3 ciphers and ciphers
that require the <em>Java Cryptography Extension (JCE) Unlimited Strength
Jurisdiction Policy Files</em> for 256-bit AES encryption. If TLSv1.3 is not
available, the TLSv1.3 ciphers <code class="literal">TLS_AES_256_GCM_SHA384</code> and
<code class="literal">TLS_AES_128_GCM_SHA256</code> are not included in the default list. If 256-bit AES is
unavailable, ciphers with <code class="literal">AES_256</code> in their names are not included in the
default list. Finally, AES GCM has known performance issues in Java versions
prior to 11 and is included in the default list only when using Java 11 or above.</p>
</div>
</div>
<p>For more information, see Oracle’s
<a href="https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2" class="ulink" target="_top">Java Cryptography Architecture documentation</a>.</p>
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title">
<a id="security-transport-tls-ssl-key-trusted-certificate-settings"></a>Transport TLS/SSL key and trusted certificate settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.7/docs/reference/settings/ssl-settings.asciidoc">edit</a>
</h4>
</div></div></div>
<p>The following settings are used to specify a private key, certificate, and the
trusted certificates that should be used when communicating over an SSL/TLS connection.
A private key and certificate must be configured.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title">
<a id="_pem_encoded_files_3"></a>PEM encoded files<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.7/docs/reference/settings/ssl-settings.asciidoc">edit</a>
</h4>
</div></div></div>
<p>When using PEM encoded files, use the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.key</code>
</span>
</dt>
<dd>
Path to a PEM encoded file containing the private key.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.key_passphrase</code>
</span>
</dt>
<dd>
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.secure_key_passphrase</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
The passphrase that is used to decrypt the private key. Since the key might not
be encrypted, this value is optional.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.certificate</code>
</span>
</dt>
<dd>
Specifies the path for the PEM encoded certificate (or certificate chain) that is
associated with the key.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.certificate_authorities</code>
</span>
</dt>
<dd>
List of paths to PEM encoded certificate files that should be trusted.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title">
<a id="_java_keystore_files_3"></a>Java keystore files<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.7/docs/reference/settings/ssl-settings.asciidoc">edit</a>
</h4>
</div></div></div>
<p>When using Java keystore files (JKS), which contain the private key, certificate
and certificates that should be trusted, use the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.path</code>
</span>
</dt>
<dd>
The path for the keystore file that contains a private key and certificate.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.password</code>
</span>
</dt>
<dd>
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.secure_password</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.key_password</code>
</span>
</dt>
<dd>
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.secure_key_password</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.truststore.path</code>
</span>
</dt>
<dd>
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.truststore.password</code>
</span>
</dt>
<dd>
The password for the truststore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.truststore.secure_password</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
Password for the truststore.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title">
<a id="security-transport-pkcs12-files"></a>PKCS#12 files<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.7/docs/reference/settings/ssl-settings.asciidoc">edit</a>
</h4>
</div></div></div>
<p>Elasticsearch can be configured to use PKCS#12 container files (<code class="literal">.p12</code> or <code class="literal">.pfx</code> files)
that contain the private key, certificate and certificates that should be trusted.</p>
<p>PKCS#12 files are configured in the same way as Java keystore files:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.path</code>
</span>
</dt>
<dd>
The path for the keystore file that contains a private key and certificate.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.type</code>
</span>
</dt>
<dd>
The format of the keystore file. It must be either <code class="literal">jks</code> or <code class="literal">PKCS12</code>. If the
keystore path ends in ".p12", ".pfx", or ".pkcs12", this setting defaults
to <code class="literal">PKCS12</code>. Otherwise, it defaults to <code class="literal">jks</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.password</code>
</span>
</dt>
<dd>
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.secure_password</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
The password for the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.key_password</code>
</span>
</dt>
<dd>
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.keystore.secure_key_password</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
The password for the key in the keystore. The default is the keystore password.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.truststore.path</code>
</span>
</dt>
<dd>
The path for the keystore that contains the certificates to trust. It must be
either a Java keystore (jks) or a PKCS#12 file.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.truststore.type</code>
</span>
</dt>
<dd>
Set this to <code class="literal">PKCS12</code> to indicate that the truststore is a PKCS#12 file.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.truststore.password</code>
</span>
</dt>
<dd>
The password for the truststore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.ssl.truststore.secure_password</code> (<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>)
</span>
</dt>
<dd>
Password for the truststore.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title">
<a id="security-transport-pkcs11-tokens"></a>PKCS#11 tokens<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.7/docs/reference/settings/ssl-settings.asciidoc">edit</a>
</h4>
</div></div></div>
<p>Elasticsearch can be configured to use a PKCS#11 token that contains the private key,
certificate and certificates that should be trusted.</p>
<p>PKCS#11 token require additional configuration on the JVM level and can be enabled
via the following settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.transport.keystore.type</code>
</span>
</dt>
<dd>
Set this to <code class="literal">PKCS11</code> to indicate that the PKCS#11 token should be used as a keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.truststore.type</code>
</span>
</dt>
<dd>
The format of the truststore file. For the Java keystore format, use <code class="literal">jks</code>. For
PKCS#12 files, use <code class="literal">PKCS12</code>. For a PKCS#11 token, use <code class="literal">PKCS11</code>. The default is
<code class="literal">jks</code>.
</dd>
</dl>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>When configuring the PKCS#11 token that your JVM is configured to use as
a keystore or a truststore for Elasticsearch, the PIN for the token can be
configured by setting the appropriate value to <code class="literal">ssl.truststore.password</code>
or <code class="literal">ssl.truststore.secure_password</code> in the context that you are configuring.
Since there can only be one PKCS#11 token configured, only one keystore and
truststore will be usable for configuration in Elasticsearch. This in turn means
that only one certificate can be used for TLS both in the transport and the
http layer.</p>
</div>
</div>
<h5>
<a id="ssl-tls-profile-settings"></a>Transport profile TLS/SSL settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.7/docs/reference/settings/security-settings.asciidoc">edit</a>
</h5>
<p>The same settings that are available for the <a class="xref" href="security-settings.html#transport-tls-ssl-settings" title="Transport TLS/SSL settings">default transport</a>
are also available for each transport profile. By default, the settings for a
transport profile will be the same as the default transport unless they
are specified.</p>
<p>As an example, lets look at the key setting. For the default transport
this is <code class="literal">xpack.security.transport.ssl.key</code>. In order to use this setting in a
transport profile, use the prefix <code class="literal">transport.profiles.$PROFILE.xpack.security.</code> and
append the portion of the setting after <code class="literal">xpack.security.transport.</code>. For the key
setting, this would be <code class="literal">transport.profiles.$PROFILE.xpack.security.ssl.key</code>.</p>
<h4>
<a id="ip-filtering-settings"></a>IP filtering settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.7/docs/reference/settings/security-settings.asciidoc">edit</a>
</h4>
<p>You can configure the following settings for <a class="xref" href="ip-filtering.html" title="Restricting connections with IP filtering">IP filtering</a>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.security.transport.filter.allow</code>
</span>
</dt>
<dd>
List of IP addresses to allow.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.transport.filter.deny</code>
</span>
</dt>
<dd>
List of IP addresses to deny.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.filter.allow</code>
</span>
</dt>
<dd>
List of IP addresses to allow just for HTTP.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.security.http.filter.deny</code>
</span>
</dt>
<dd>
List of IP addresses to deny just for HTTP.
</dd>
<dt>
<span class="term">
<code class="literal">transport.profiles.$PROFILE.xpack.security.filter.allow</code>
</span>
</dt>
<dd>
List of IP addresses to allow for this profile.
</dd>
<dt>
<span class="term">
<code class="literal">transport.profiles.$PROFILE.xpack.security.filter.deny</code>
</span>
</dt>
<dd>
List of IP addresses to deny for this profile.
</dd>
</dl>
</div>
<h4>
<a id="hashing-settings"></a>User cache and password hash algorithms<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.7/docs/reference/settings/security-hash-settings.asciidoc">edit</a>
</h4>
<p>Certain realms store user credentials in memory. To limit exposure
to credential theft and mitigate credential compromise, the cache only stores
a hashed version of the user credentials in memory. By default, the user cache
is hashed with a salted <code class="literal">sha-256</code> hash algorithm. You can use a different
hashing algorithm by setting the <code class="literal">cache.hash_algo</code> realm settings to any of the
following values:</p>
<div class="table">
<a id="cache-hash-algo"></a>
<p class="title"><strong>Table 1. Cache hash algorithms</strong></p>
<div class="table-contents">
<table border="1" cellpadding="4px" summary="Cache hash algorithms">
<colgroup>
<col class="col_1">
<col class="col_2">
<col class="col_3">
<col class="col_4">
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p>Algorithm</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Description</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">ssha256</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses a salted <code class="literal">sha-256</code> algorithm (default).</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">md5</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">MD5</code> algorithm.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">sha1</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">SHA1</code> algorithm.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 1024 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt4</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 16 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt5</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 32 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt6</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 64 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt7</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 128 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt8</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 256 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt9</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 512 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 10000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_1000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 1000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_10000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 10000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_50000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 50000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_100000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 100000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_500000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                              pseudorandom function using 500000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_1000000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 1000000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">noop</code>,<code class="literal">clear_text</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Doesn’t hash the credentials and keeps it in clear text in
                            memory. CAUTION: keeping clear text is considered insecure
                            and can be compromised at the OS level (for example through
                            memory dumps and using <code class="literal">ptrace</code>).</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Likewise, realms that store passwords hash them using cryptographically strong
and password-specific salt values. You can configure the algorithm for password
hashing by setting the <code class="literal">xpack.security.authc.password_hashing.algorithm</code> setting
to one of the following:</p>
<div class="table">
<a id="password-hashing-algorithms"></a>
<p class="title"><strong>Table 2. Password hashing algorithms</strong></p>
<div class="table-contents">
<table border="1" cellpadding="4px" summary="Password hashing algorithms">
<colgroup>
<col class="col_1">
<col class="col_2">
<col class="col_3">
<col class="col_4">
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Algorithm</th>
<th align="left" valign="top"></th>
<th align="left" valign="top"></th>
<th align="left" valign="top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 1024 rounds. (default)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt4</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 16 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt5</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 32 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt6</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 64 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt7</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 128 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt8</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 256 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt9</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 512 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt10</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 1024 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt11</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 2048 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt12</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 4096 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt13</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 8192 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">bcrypt14</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">bcrypt</code> algorithm with salt generated in 16384 rounds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 10000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_1000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 1000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_10000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 10000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_50000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 50000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_100000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 100000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_500000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                              pseudorandom function using 500000 iterations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">pbkdf2_1000000</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>Uses <code class="literal">PBKDF2</code> key derivation function with <code class="literal">HMAC-SHA512</code> as a
                             pseudorandom function using 1000000 iterations.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="search-settings.html">« 搜索设置</a>
</span>
<span class="next">
<a href2="shard-request-cache.html">Shard request cache settings »</a>
</span>
</div>
</div>

                  <!-- end body -->
                        </div>
                        <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                        
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </section>
</div>
<script src="../static/cn.js"></script>
</body>
</html>